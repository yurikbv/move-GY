(this.webpackJsonpmovexyz=this.webpackJsonpmovexyz||[]).push([[0],{105:function(e,t,n){},111:function(e,t,n){},130:function(e,t,n){},132:function(e,t,n){},133:function(e,t,n){},138:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},152:function(e,t,n){},153:function(e,t,n){},155:function(e,t,n){},214:function(e,t,n){},218:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),r=n.n(a),s=n(23),i=n.n(s),l=(n(105),n(12)),o=n(9),u=n(16),d=n(8),j=(n(110),n(2)),b=n(4),p=(n(111),n.p+"static/media/example.84e38c72.png"),h=function(e,t){"undefined"!==window&&("user"===e?localStorage.setItem(e,JSON.stringify(t)):localStorage.setItem(e,t))},O=function(){if("undefined"!==window&&function(e){if("undefined"!==window)return localStorage.getItem(e)}("token"))return!!localStorage.getItem("user")&&JSON.parse(localStorage.getItem("user"))},f=function(e,t){if("undefined"!==typeof window){var n=JSON.parse(localStorage.getItem("user"));n=e.data.user,localStorage.setItem("user",JSON.stringify(n))}t()},x=function(e,t,n,c){var a=m(n-e),r=m(c-t),s=Math.sin(a/2)*Math.sin(a/2)+Math.cos(m(e))*Math.cos(m(n))*Math.sin(r/2)*Math.sin(r/2);return 6371*(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)))};function m(e){return e*(Math.PI/180)}var v=n(6),g=n.n(v),_=n(10),y=n(11),E=n.n(y),R="/api",S=function(){return function(){var e=Object(_.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("".concat(R,"/faqs"));case 3:n=e.sent,t({type:"GET_FAQS",payload:n.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(),t({type:"GET_FAQS_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},w=n(89),C=n.n(w),k=n(227),T=n(228),N=n(229),A=n(230),I=n(231),D=n(232),F=n(233),U=n(234),L=n(235),B=n(236);n(130);function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}function V(e,t){if(null==e)return{};var n,c,a=function(e,t){if(null==e)return{};var n,c,a={},r=Object.keys(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var P=a.createElement("g",null),G=a.createElement("g",null),z=a.createElement("g",null),q=a.createElement("g",null),H=a.createElement("g",null),Y=a.createElement("g",null),W=a.createElement("g",null),Q=a.createElement("g",null),X=a.createElement("g",null),J=a.createElement("g",null),K=a.createElement("g",null),Z=a.createElement("g",null),$=a.createElement("g",null),ee=a.createElement("g",null),te=a.createElement("g",null);function ne(e,t){var n=e.title,c=e.titleId,r=V(e,["title","titleId"]);return a.createElement("svg",M({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t,"aria-labelledby":c},r),n?a.createElement("title",{id:c},n):null,a.createElement("g",null,a.createElement("polygon",{style:{fill:"#0095FF"},points:"177.47,244.428 162.118,218.646 333.856,115.459 349.208,141.24  "}),a.createElement("polygon",{style:{fill:"#0095FF"},points:"332.274,401.58 166.791,317.011 180.326,290.233 345.81,374.803  "})),a.createElement("g",null,a.createElement("path",{style:{fill:"#00ABE9"},d:"M406,0c-49.501,0-90,40.499-90,90c0,49.499,40.499,90,90,90s90-40.501,90-90 C496,40.499,455.501,0,406,0z"}),a.createElement("path",{style:{fill:"#00ABE9"},d:"M406,332c-49.501,0-90,40.499-90,90c0,49.499,40.499,90,90,90s90-40.501,90-90 C496,372.499,455.501,332,406,332z"}),a.createElement("path",{style:{fill:"#00ABE9"},d:"M106,181c-49.501,0-90,40.499-90,90c0,49.499,40.499,90,90,90s90-40.501,90-90 C196,221.499,155.501,181,106,181z"})),a.createElement("g",null,a.createElement("path",{style:{fill:"#0095FF"},d:"M496,422c0,49.499-40.499,90-90,90V332C455.501,332,496,372.499,496,422z"}),a.createElement("path",{style:{fill:"#0095FF"},d:"M406,180V0c49.501,0,90,40.499,90,90C496,139.499,455.501,180,406,180z"}),a.createElement("path",{style:{fill:"#0095FF"},d:"M196,271c0,49.499-40.499,90-90,90V181C155.501,181,196,221.499,196,271z"})),P,G,z,q,H,Y,W,Q,X,J,K,Z,$,ee,te)}var ce=a.forwardRef(ne),ae=(n.p,function(e){var t=Object(a.useState)(),n=Object(b.a)(t,2),r=n[0],s=n[1],i="https://move-gy-2.herokuapp.com",l="moveXYZ - Vehicle Tracker",o=[Object(c.jsx)(k.a,{url:i,subject:l,children:Object(c.jsx)(T.a,{size:36})}),Object(c.jsx)(N.a,{url:i,children:Object(c.jsx)(A.a,{size:36})}),Object(c.jsx)(I.a,{title:l,url:i,children:Object(c.jsx)(D.a,{size:36})}),Object(c.jsx)(F.a,{title:l,url:i,children:Object(c.jsx)(U.a,{size:36})}),Object(c.jsx)(L.a,{title:l,url:i,children:Object(c.jsx)(B.a,{size:36})})];return Object(c.jsxs)("div",{className:"share__section",style:{top:e.top+"px"},children:[Object(c.jsx)("div",{onClick:function(){return s(!0)},children:Object(c.jsxs)("span",{style:{display:"flex",alignSelf:"center",margin:"10px 0 0",padding:"10px 15px",borderRadius:"5px",cursor:"pointer",border:"2px solid black"},children:[Object(c.jsx)(ce,{style:{height:"24px",width:"auto"}}),Object(c.jsx)("b",{style:{marginLeft:"10px"},children:"Share"})]})}),Object(c.jsx)(C.a,{openFromRight:!0,items:o,showNav:r,onHideNav:function(){return s(!1)},titleStyle:{display:"none"},itemStyle:{listStyleType:"none",padding:"5px",outline:"none"},navStyle:{backgroundColor:"white",padding:"0"},childeren:Object(c.jsx)("div",{children:"Hello Kitty"})})]})});var re=Object(l.b)((function(e){return{faqs:e.faqs.faqs}}))((function(e){var t=Object(a.useState)([{user:"B. Persuad",from:"Canal # 2, WBD",text:"Definitely genius"},{user:"M. Brown ",from:"Georgetown",text:"Free! In GT, we need to support good things"},{user:"A. Nagamooto",from:"New Amsterdam",text:"Now I can save myself from standing in the hot sun and the rain."}]),n=Object(b.a)(t,2),r=n[0],s=(n[1],Object(a.useState)([])),i=Object(b.a)(s,2),l=i[0],u=i[1];return Object(a.useEffect)((function(){e.dispatch(S())}),[]),Object(a.useEffect)((function(){if(e.faqs.length>0){var t=e.faqs.map((function(e){return Object(j.a)(Object(j.a)({},e),{},{shown:!1})}));u(t)}}),[e.faqs]),Object(c.jsxs)("div",{children:[Object(c.jsxs)("section",{className:"container landing__container",children:[Object(c.jsx)("h3",{children:"Bus Tracker!"}),Object(c.jsx)(ae,{top:80}),Object(c.jsxs)("div",{className:"landing__buttons",children:[Object(c.jsx)(o.b,{to:"/track_bus",style:{backgroundColor:"rgb(245, 248, 41)",marginRight:"10px"},children:"Track Bus"}),O()&&O()._id?null:Object(c.jsx)(o.b,{to:"/register_driver",style:{backgroundColor:"lightGrey",marginLeft:"10px"},children:"Drivers Login/Register Now"})]}),Object(c.jsx)("h3",{children:"WHY A BUS TRACKER?"}),Object(c.jsx)("strong",{children:"For Passengers"})," ",Object(c.jsx)("br",{}),"Improve ways to travel and reduce frustrating wait time",Object(c.jsx)("br",{}),"Receive updates delays notification (coming soon)",Object(c.jsx)("br",{}),"Piece of mind, Priceless!",Object(c.jsx)("br",{}),Object(c.jsx)("strong",{style:{display:"block",marginTop:"20px"},children:"For Bus Drivers/Operators"}),"Improve customer experience riding public transportation ",Object(c.jsx)("br",{}),"Potential to save time and money",Object(c.jsx)("br",{}),"Data to improve your business ",Object(c.jsx)("br",{})]}),Object(c.jsx)("div",{style:{backgroundColor:"black",color:"white",paddingBottom:"20px"},children:Object(c.jsxs)("section",{className:"container how-it-works",children:[Object(c.jsx)("h3",{children:"HOW IT WORKS?"}),Object(c.jsx)("strong",{style:{display:"block",textAlign:"center",marginTop:"-20px 0 15px"},children:"3 Easy Steps"}),Object(c.jsxs)("span",{children:[Object(c.jsx)("strong",{children:"1."}),"Drivers/conductors register and link vehicles to a route."]}),Object(c.jsxs)("span",{children:[Object(c.jsx)("strong",{children:"2."}),"Drivers turn on the tracker on Website. Note, internet data service is required. No worries. 12 hours use (2 MB) =  1 minute of a facebook video (2 MB)"]}),Object(c.jsxs)("span",{children:[Object(c.jsx)("strong",{children:"3."})," Passengers click the",Object(c.jsx)(o.b,{to:"/track_bus",children:"track bus"}),"link to see where their bus is."]}),Object(c.jsx)("div",{style:{textAlign:"center",maxWidth:"100%"},children:Object(c.jsx)("img",{src:p,alt:"example map",style:{maxWidth:"100%"}})})]})}),Object(c.jsxs)("section",{className:"container",style:{marginBottom:"20px"},children:[Object(c.jsx)("h3",{children:"WHAT ARE PEOPLE SAYING?"}),r.map((function(e){return Object(c.jsxs)("div",{style:{marginBottom:"15px"},children:[Object(c.jsxs)("i",{style:{display:"block",fontWeight:"700",fontSize:"20px"},children:['"',e.text,'"']}),Object(c.jsxs)("span",{children:["-",e.user," - ",e.from]})]},e.user)}))]}),Object(c.jsx)("div",{style:{backgroundColor:"black",color:"white",paddingBottom:"20px"},children:Object(c.jsxs)("section",{className:"container",children:[Object(c.jsx)("h3",{children:"FAQ"}),Object(c.jsx)("div",{style:{marginTop:"-20px"},children:l.map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsxs)("span",{style:{cursor:"pointer",display:"flex",alignItems:"center"},onClick:function(){return function(e){var t=l.map((function(t){return e===t._id?Object(j.a)(Object(j.a)({},t),{},{shown:!t.shown}):t}));u(t)}(e._id)},children:[Object(c.jsx)("strong",{style:{fontSize:"20px",marginRight:"5px",padding:"5px 10px"},children:e.title}),Object(c.jsx)("strong",{style:{fontSize:"20px"},children:e.shown?"-":"+"})]}),e.shown&&Object(c.jsx)("p",{children:e.text})]},e._id)}))})]})})]})}));n(132);function se(){return Object(c.jsxs)("div",{className:"bottomNavBar",children:[Object(c.jsx)(o.b,{to:"/about_us",children:"About Us"}),Object(c.jsx)(o.b,{to:"/tos",children:"TOS"}),Object(c.jsx)(o.b,{to:"/contact_us",children:"Contact Us"}),Object(c.jsx)("br",{}),Object(c.jsx)(o.b,{to:"/fb",children:"FB"}),Object(c.jsx)(o.b,{to:"/ig",children:"IG"})]})}n(133);var ie=function(){return function(){var e=Object(_.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("".concat(R,"/cities"));case 3:n=e.sent,t({type:"GET_CITIES",payload:n.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t({type:"GET_CITIES_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},le=n(14),oe=n.n(le),ue=function(){return function(){var e=Object(_.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("".concat(R,"/admin/routes/").concat(localStorage.cityId));case 3:n=e.sent,t({type:"GET_TRACKER_ROUTES",payload:n.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t({type:"GET_TRACKER_ROUTES_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},de=Object(l.b)((function(e){return{cities:e.cities.cities,loading:e.cities.loading}}))(Object(u.h)((function(e){var t=Object(a.useState)([]),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(),l=Object(b.a)(i,2),o=l[0],u=l[1],d=Object(a.useState)(!0),j=Object(b.a)(d,2),p=j[0],h=j[1];return Object(a.useEffect)((function(){e.dispatch(ie())}),[]),Object(a.useEffect)((function(){e.cities&&(s(e.cities),h(e.loading))}),[e.cities]),Object(a.useEffect)((function(){localStorage.city&&u(localStorage.city)}),[]),Object(c.jsx)("div",{className:"alert__modal--container",style:{zIndex:"100"},children:Object(c.jsxs)("div",{className:"alert__modal",children:[p?Object(c.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"},children:Object(c.jsx)(oe.a,{})}):Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault(),localStorage.setItem("city",o);var n=r.filter((function(e){return e.city===o}))[0]._id;localStorage.setItem("cityId",n),e.toggleCityModal(),"/track_bus"===e.location.pathname&&e.dispatch(ue())},children:[Object(c.jsx)("label",{children:Object(c.jsx)("select",{className:"choose__city--select",size:r.length>20?20:r.length,value:o||r[0].name,onChange:function(e){return u(e.target.value)},children:r.length>0&&r.map((function(e){return Object(c.jsx)("option",{children:e.city},e._id)}))})}),Object(c.jsx)("button",{type:"submit",style:{margin:"15px 0 0",display:"block"},className:"route-add-edit__submit",children:"Submit"})]}),Object(c.jsx)("button",{type:"button",className:"close__button--cross",onClick:e.toggleCityModal,children:"X"})]})})})));var je=Object(l.b)((function(e){return{user:e.user.user,loading:e.user.loading,isAuthenticated:e.user.isAuthenticated}}))(Object(u.h)((function(e){var t=Object(a.useState)(!1),n=Object(b.a)(t,2),r=n[0],s=n[1],i=function(){return s(!r)};return Object(c.jsx)("header",{children:Object(c.jsxs)("nav",{className:"container nav-bar__container",children:[Object(c.jsx)(o.b,{to:"/",className:"logo",children:Object(c.jsx)("h1",{children:"moveXYZ"})}),Object(c.jsx)("button",{className:"choose__city",onClick:i,children:localStorage.city?localStorage.city:"+"}),r&&Object(c.jsx)(de,{toggleCityModal:i}),Object(c.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"center",minWidth:"30%"},className:"nav-bar__section",children:[Object(c.jsx)(o.b,{to:"/blog",children:"Blog"}),O()?Object(c.jsxs)(a.Fragment,{children:["Admin"===O().role?Object(c.jsx)(o.b,{to:"/admin/users",children:"Admin"}):Object(c.jsx)(o.b,{to:"/profile",children:"My Account"}),Object(c.jsx)("button",{className:"logout",onClick:function(){var t;e.dispatch((t=e.history,function(){var e=Object(_.a)(g.a.mark((function e(n){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=O()._id,localStorage.clear(),e.prev=2,e.next=5,E.a.put("".concat(R,"/user/logout/").concat(c));case 5:n({type:"LOGOUT_USER"}),t.push("/"),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),n({type:"LOGOUT_USER_ERROR"});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()))},children:"Log out"})]}):Object(c.jsx)(o.b,{to:"/register_user",children:"Login / Register"})]})]})})}))),be=n(90),pe=n(91),he=n.n(pe);n(138);var Oe=Object(l.b)()(Object(u.h)((function(e){var t=function(t){!function(e,t){console.log("AUTHENTICATE HELPER ON SIGNIN RESPONSE",e),h("token",e.data.token),h("user",e.data.user),t()}(t,(function(){O()&&"Admin"===O().role?e.history.push("/admin/users"):e.history.push("/profile")}))},n=function(n){var c,a;e.dispatch((c=n.tokenId,a=e.role,function(){var e=Object(_.a)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={idToken:c,role:a},e.next=4,E.a.post("".concat(R,"/google_login"),n);case 4:return r=e.sent,t({type:"LOGIN_REGISTER_GOOGLE",payload:r.data}),e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(0),t({type:"GOOGLE_AUTH_ERROR"}),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())).then((function(n){d.b.success("Google ".concat(e.action," success")),t(n)})).catch((function(t){d.b.error("Google ".concat(e.action," error. Try again."))}))};return Object(c.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[Object(c.jsx)(be.GoogleLogin,{clientId:"".concat(""),onSuccess:n,onFailure:n,cookiePolicy:"single_host_origin",children:"".concat(e.action," with Google")}),Object(c.jsx)(he.a,{appId:"770247870367817",autoLoad:!1,callback:function(n){var c,a,r;e.dispatch((c=n.userID,a=n.accessToken,r=e.role,function(){var e=Object(_.a)(g.a.mark((function e(t){var n,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n={userId:c,accessToken:a,role:r},e.next=4,E.a.post("".concat(R,"/facebook_login"),n);case 4:return s=e.sent,t({type:"LOGIN_REGISTER_FACEBOOK",payload:s.data}),e.abrupt("return",s);case 9:return e.prev=9,e.t0=e.catch(0),t({type:"FACEBOOK_AUTH_ERROR"}),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())).then((function(n){d.b.success("Facebook ".concat(e.action," success")),t(n)})).catch((function(t){d.b.error("Facebook ".concat(e.action," error. Try again."))}))},textButton:"".concat(e.action," with Facebook"),cssClass:"facebook__button",icon:"fa-facebook"})]})}))),fe=function(e){return Object(c.jsx)("div",{style:{flexGrow:"1",display:"flex",alignItems:"center"},children:Object(c.jsxs)("div",{className:"container",style:{textAlign:"center"},children:[Object(c.jsx)("h4",{children:"Sign Up / Sign In User"}),Object(c.jsx)(Oe,{role:"User",action:"Sign Up"}),Object(c.jsx)(o.b,{to:"/register_driver",style:{textDecoration:"none",display:"block",marginTop:"15px"},children:"Register as a Driver"})]})})},xe=function(e){return Object(c.jsx)("div",{style:{flexGrow:"1",display:"flex",alignItems:"center"},children:Object(c.jsxs)("div",{className:"container",style:{textAlign:"center"},children:[Object(c.jsx)("h4",{children:"Sign Up / Sign In Driver"}),Object(c.jsx)("h3",{children:"Bus Tracker"}),Object(c.jsx)(Oe,{role:"Driver",action:"Sign Up"})]})})},me=n(44),ve=function(e){var t=e.component,n=Object(me.a)(e,["component"]);return Object(c.jsx)(u.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return O()?Object(c.jsx)(t,Object(j.a)({},e)):Object(c.jsx)(u.a,{to:"/"})}}))},ge=n(13),_e=n(237);n(139);function ye(){var e={textDecoration:"underline",textShadow:"3px 3px 10px rgb(15,15,15)"};return Object(c.jsxs)("div",{style:{textAlign:"left"},children:[Object(c.jsx)(o.c,{to:"/profile",className:"account_link",activeStyle:e,children:"Profile"}),"User"===O().role&&Object(c.jsxs)(c.Fragment,{children:[" |",Object(c.jsx)(o.c,{to:"/bus_tracker",className:"account_link",activeStyle:e,children:"Bus Tracker"})]}),"Driver"===O().role&&Object(c.jsxs)(c.Fragment,{children:[" |",Object(c.jsx)(o.c,{to:"/vehicles",className:"account_link",activeStyle:e,children:"Vehicles"})," |",Object(c.jsx)(o.c,{to:"/service/new/new",className:"account_link",activeStyle:e,children:"Service"})]}),"Admin"===O().role&&Object(c.jsxs)(c.Fragment,{children:[" |",Object(c.jsx)(o.c,{to:"/admin/users",className:"account_link",activeStyle:e,children:"Admin"})," |"]})]})}n(140);function Ee(){return(Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}function Re(e,t){if(null==e)return{};var n,c,a=function(e,t){if(null==e)return{};var n,c,a={},r=Object.keys(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Se=a.createElement("g",null,a.createElement("path",{d:"m457 101h-100.188l-9.743-29.23c-6.136-18.405-23.293-30.77-42.692-30.77h-96.754c-19.399 0-36.556 12.365-42.691 30.77l-9.744 29.23h-24.188v-25c0-19.299-15.701-35-35-35h-20c-19.299 0-35 15.701-35 35v26.812c-23.568 6.208-41 27.698-41 53.188v260c0 30.327 24.673 55 55 55h402c30.327 0 55-24.673 55-55v-260c0-30.327-24.673-55-55-55zm-386-25c0-2.757 2.243-5 5-5h20c2.757 0 5 2.243 5 5v25h-30zm411 340c0 13.785-11.215 25-25 25h-402c-13.785 0-25-11.215-25-25v-260c0-13.785 11.215-25 25-25h111c6.456 0 12.188-4.131 14.23-10.257l13.162-39.486c2.046-6.135 7.764-10.257 14.231-10.257h96.754c6.467 0 12.186 4.122 14.23 10.256l13.162 39.487c2.043 6.126 7.775 10.257 14.231 10.257h111c13.785 0 25 11.215 25 25z"}),a.createElement("circle",{cx:436,cy:176,r:15}),a.createElement("path",{d:"m106 161h-30c-8.284 0-15 6.716-15 15s6.716 15 15 15h30c8.284 0 15-6.716 15-15s-6.716-15-15-15z"}),a.createElement("g",null,a.createElement("path",{d:"m256 411c-74.439 0-135-60.561-135-135s60.561-135 135-135 135 60.561 135 135-60.561 135-135 135zm0-240c-57.897 0-105 47.103-105 105s47.103 105 105 105 105-47.103 105-105-47.103-105-105-105z"})),a.createElement("g",null,a.createElement("path",{d:"m256 351c-41.355 0-75-33.645-75-75s33.645-75 75-75 75 33.645 75 75-33.645 75-75 75zm0-120c-24.813 0-45 20.187-45 45s20.187 45 45 45 45-20.187 45-45-20.187-45-45-45z"})));function we(e,t){var n=e.title,c=e.titleId,r=Re(e,["title","titleId"]);return a.createElement("svg",Ee({id:"Capa_1",enableBackground:"new 0 0 512 512",height:512,viewBox:"0 0 512 512",width:512,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},r),n?a.createElement("title",{id:c},n):null,Se)}var Ce=a.forwardRef(we);n.p,n(141);function ke(e){var t=Object(a.useState)(null),n=Object(b.a)(t,2),r=n[0],s=n[1];Object(a.useEffect)((function(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){var t={facingMode:e.mode,width:{min:640,ideal:1920,max:2560},height:{min:480,ideal:1080,max:1440},frameRate:{ideal:10,max:15}};navigator.mediaDevices.getUserMedia({video:t}).then((function(e){document.querySelector("#video").srcObject=e,s(e.getVideoTracks()[0])})).catch((function(e){return console.log(e)}))}}),[]),Object(a.useEffect)((function(){return window.addEventListener("popstate",(function(t){t.preventDefault(),t.stopPropagation(),e.toggleCamera()})),function(){window.removeEventListener("popstate",(function(t){t.preventDefault(),t.stopPropagation(),e.toggleCamera()}))}}),[]);return Object(c.jsxs)("div",{className:"camera__container",children:[Object(c.jsx)("video",{id:"video",autoPlay:!0,muted:!0}),Object(c.jsx)("div",{className:"push__icon",onClick:function(){var t=document.createElement("canvas"),n=document.querySelector("#video");t.width=n.videoWidth,t.height=n.videoHeight,t.getContext("2d").drawImage(n,0,0,n.videoWidth,n.videoHeight),r.enabled=!1,e.addImage(t.toDataURL("image/jpeg",1),e.destination),e.toggleCamera()},children:Object(c.jsxs)("svg",{viewBox:"0 0 150 150",children:[Object(c.jsx)("circle",{cx:"75",cy:"75",r:"73",stroke:"white",strokeWidth:"4",fill:"transparent"}),Object(c.jsx)("circle",{cx:"75",cy:"75",r:"64",stroke:"white",strokeWidth:"2",fill:"white"})]})})]})}var Te,Ne=Object(l.b)((function(e){return{user:e.user.user,loading:e.user.loading}}))((function(e){var t=Object(a.useState)(""),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(""),l=Object(b.a)(i,2),o=(l[0],l[1]),u=Object(a.useState)(""),j=Object(b.a)(u,2),p=j[0],h=j[1],x=Object(a.useState)([{}]),m=Object(b.a)(x,2),v=m[0],y=m[1],S=Object(a.useState)(!1),w=Object(b.a)(S,2),C=w[0],k=w[1],T=Object(a.useState)(!0),N=Object(b.a)(T,2),A=N[0],I=N[1];Object(a.useEffect)((function(){e.dispatch(function(){var e=Object(_.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("".concat(R,"/user/").concat(O()._id));case 3:return n=e.sent,t({type:"LOAD_USER",payload:n.data}),e.abrupt("return",n);case 8:return e.prev=8,e.t0=e.catch(0),console.log(e.t0),t({type:"LOAD_USER_ERROR"}),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[localStorage.user]),Object(a.useEffect)((function(){e.user&&(s(e.user.name),h(e.user.mobileNumber),y(e.user.images),I(e.loading),o(e.user.role))}),[e.user]);var D=function(){return k(!C)};return Object(c.jsxs)("div",{style:{position:"relative",flexGrow:"1",boxSizing:"border-box",width:"100%"},children:[C&&Object(c.jsx)(ke,{addImage:function(e){var t={id:Object(_e.a)(),src:e};y([].concat(Object(ge.a)(v),[t]))},toggleCamera:D,mode:"user"}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("h3",{children:"My Account"}),Object(c.jsx)(ye,{}),Object(c.jsx)("hr",{}),A?Object(c.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"},children:Object(c.jsx)(oe.a,{})}):Object(c.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),!r.trim())return d.b.error("Name is required"),!1;var n,c={name:r,mobileNumber:p,images:v};e.dispatch((n=c,function(){var e=Object(_.a)(g.a.mark((function e(t){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.put("".concat(R,"/user/").concat(O()._id),n);case 3:c=e.sent,t({type:"UPDATE_PROFILE",payload:c.data}),f(c,(function(){d.b.success("Profile was updated.")})),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),t({type:"UPDATE_PROFILE_ERROR"}),d.b.error("Error Profile updated");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))},children:[Object(c.jsxs)("label",{style:{marginBottom:"10px",display:"block"},children:[Object(c.jsx)("span",{style:{display:"block"},children:"Name"}),Object(c.jsx)("input",{type:"text",id:"nameField",value:r,onChange:function(e){return s(e.target.value)}})]}),Object(c.jsxs)("label",{style:{marginBottom:"10px",display:"block"},children:[Object(c.jsx)("span",{style:{display:"block"},children:"Mobile number"}),Object(c.jsx)("input",{type:"tel",id:"mobileField",value:p,onChange:function(e){return h(e.target.value)}})]}),Object(c.jsxs)("div",{style:{marginBottom:"10px",display:"flex",cursor:"pointer"},onClick:D,children:[Object(c.jsx)("span",{children:"Take/Upload selfie"}),Object(c.jsx)(Ce,{style:{maxHeight:"24px",maxWidth:"24px",marginLeft:"10px"}})]}),Object(c.jsx)("div",{className:"selfie__container",children:v.length>0&&v.map((function(e){return Object(c.jsxs)("div",{className:"images_selfie",children:[Object(c.jsx)("img",{src:e.src,alt:e.id}),Object(c.jsx)("button",{onClick:function(){return function(e){var t=v.filter((function(t){return t.id!==e}));y(t)}(e.id)},children:"X"})]},e.id)}))}),Object(c.jsx)("button",{type:"submit",className:"route-add-edit__submit",children:"Submit"})]})]})]})})),Ae=function(e){var t=e.component,n=Object(me.a)(e,["component"]);return Object(c.jsx)(u.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return!O()||"Driver"!==O().role&&"Admin"!==O().role?Object(c.jsx)(u.a,{to:{pathname:"/signin",state:{from:e.location}}}):Object(c.jsx)(t,Object(j.a)({},e))}}))},Ie=function(e){var t=e.component,n=Object(me.a)(e,["component"]);return Object(c.jsx)(u.b,Object(j.a)(Object(j.a)({},n),{},{render:function(e){return O()&&"Admin"===O().role?Object(c.jsx)(t,Object(j.a)({},e)):Object(c.jsx)(u.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},De={headers:{"Content-Type":"application/json"}},Fe=function(){return function(){var e=Object(_.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("".concat(R,"/vehicles/").concat(O()._id));case 3:n=e.sent,t({type:"GET_VEHICLES_FOR_DRIVER",payload:n.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0),t({type:"GET_VEHICLES_FOR_DRIVER_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},Ue=function(e,t){return function(){var n=Object(_.a)(g.a.mark((function n(c){var a,r,s;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=null===t.speed?0:t.speed,r={id:e,latitude:t.latitude,longitude:t.longitude,speed:a},n.prev=2,n.next=5,E.a.put("".concat(R,"/vehicle/location"),r);case 5:s=n.sent,c({type:"SET_VEHICLE_POSITION",payload:s.data}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),c({type:"SET_VEHICLE_POSITION_ERROR"});case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}()},Le=function(e){return function(){var t=Object(_.a)(g.a.mark((function t(n){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.put("".concat(R,"/vehicle/clear_location"),{id:e});case 3:c=t.sent,n({type:"CLEAR_VEHICLE_POSITION",payload:c.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Be=function(e){return function(){var t=Object(_.a)(g.a.mark((function t(n){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.put("".concat(R,"/vehicle/active/").concat(e),{id:O()._id});case 3:c=t.sent,n({type:"ACTIVE_VEHICLE",payload:c.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Me=function(e,t){return function(){var n=Object(_.a)(g.a.mark((function n(c){var a;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,E.a.put("".concat(R,"/vehicle/service/").concat(e),t,De);case 3:a=n.sent,c({type:"VEHICLE_SERVICE",payload:a.data}),d.b.success("Service for vehicle was updated"),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0);case 11:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},Ve=(n(142),n(92)),Pe=n.n(Ve),Ge={borderRadius:2},ze=Object(l.b)()((function(e){return Object(c.jsx)(a.Fragment,{children:Object(c.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(c.jsx)("span",{style:{margin:"0 3px"},children:e.vehicle.type_of_vehicle})," /",Object(c.jsx)("span",{style:{margin:"0 3px"},children:e.vehicle.plate})," /",e.vehicle.has_route?Object(c.jsx)(o.b,{to:"/service/".concat(e.vehicle._id,"/").concat(e.vehicle.has_route),style:{margin:"0 3px"},children:e.vehicle.has_route}):Object(c.jsx)(o.b,{to:"/service/".concat(e.vehicle._id,"/new"),style:{margin:"0 3px"},children:"Add Service"})," /",Object(c.jsx)("span",{style:{margin:"0 3px"},children:" Tracker"}),Object(c.jsx)("div",{style:{marginLeft:"3px"},children:Object(c.jsx)(Pe.a,{style:{display:"inline"},value:e.vehicle.isActive,thumbStyle:Ge,trackStyle:Ge,onToggle:function(t){e.handleTracker(e.vehicle,!t)}})})]})})})),qe=navigator.geolocation,He=Object(l.b)((function(e){return{vehicles:e.vehicles.vehicles,loading:e.vehicles.loading}}))((function(e){var t=Object(a.useState)([]),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(!0),l=Object(b.a)(i,2),u=l[0],j=l[1],p=Object(a.useState)({}),h=Object(b.a)(p,2),O=h[0],f=h[1],x=Object(a.useState)(),m=Object(b.a)(x,2),v=m[0],y=m[1];Object(a.useEffect)((function(){e.dispatch(Fe())}),[]),Object(a.useEffect)((function(){if(e.vehicles.length){s(e.vehicles),j(e.loading);var t=e.vehicles.filter((function(e){return!0===e.isActive}))[0];t&&y(t)}}),[e.vehicles]),Object(a.useEffect)((function(){if(v&&v.isActive){var e=v.average_speed.length>1&&v.average_speed.reduce((function(e,t){return+e+ +t})).toFixed(3)/v.average_speed.length;f({latitude:v.latitude,longitude:v.longitude,speed:v.speed,average_speed:e})}}),[v]);var E=function(){var t=Object(_.a)(g.a.mark((function t(n,c){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!c){t.next=11;break}if(void 0!==Te){t.next=7;break}return t.next=4,e.dispatch(Be(n._id));case 4:navigator.geolocation?Te=qe.watchPosition((function(t){e.dispatch(Ue(n._id,t.coords))}),(function(e){return console.log(e)}),{timeout:6e4,maximumAge:6e4,distanceFilter:15}):d.b.error("Geolocation is not supported by your browser"),t.next=9;break;case 7:return t.next=9,e.dispatch(Be(n._id));case 9:t.next=16;break;case 11:return qe.clearWatch(Te),Te=null,f({}),t.next=16,e.dispatch(Le(n._id));case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),R=Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{style:{fontWeight:"700",display:"block",marginLeft:"5px"},children:"lat: ".concat((+O.latitude).toFixed(6))}),Object(c.jsx)("div",{style:{fontWeight:"700",display:"block",marginLeft:"5px"},children:"lng: ".concat((+O.longitude).toFixed(6))}),Object(c.jsx)("div",{style:{fontWeight:"700",display:"block",marginLeft:"5px"},children:"speed: ".concat((+O.speed).toFixed(2))}),Object(c.jsx)("div",{style:{fontWeight:"700",display:"block",marginLeft:"5px"},children:"average speed: ".concat((+O.average_speed).toFixed(2))}),Object(c.jsx)("hr",{}),Object(c.jsx)("button",{className:"reverseRoute__button",onClick:function(){var t={type_of_service:v.type_of_service,has_route:v.has_reverse_route,has_reverse_route:v.has_route,number:v.number};e.dispatch(Me(v._id,t))},children:"Reverse Route"}),Object(c.jsx)("hr",{})]}),S=r.map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",margin:"10px 0",justifyContent:"space-between"},children:Object(c.jsx)(ze,{vehicle:e,handleTracker:E})}),Object(c.jsx)("hr",{})]},e._id)}));return Object(c.jsxs)("div",{className:"container",style:{flexGrow:"1",width:"100%",boxSizing:"border-box"},children:[Object(c.jsx)("h3",{children:"My Account"}),Object(c.jsx)(ye,{}),Object(c.jsx)("hr",{}),Object(c.jsx)(o.b,{to:"/add_vehicle",className:"add_vehicle--link",style:{marginBottom:"10px",display:"inline-block"},children:"Add vehicle"}),Object(c.jsx)("hr",{}),O&&O.latitude&&R,Object(c.jsx)("span",{style:{display:"block",margin:"25px 0 10px",fontWeight:"700"},children:"type / tags / service / tracker"}),u?Object(c.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"},children:Object(c.jsx)(oe.a,{})}):Object(c.jsx)("div",{children:S})]})}));function Ye(){return(Ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}function We(e,t){if(null==e)return{};var n,c,a=function(e,t){if(null==e)return{};var n,c,a={},r=Object.keys(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Qe=a.createElement("metadata",null," Svg Vector Icons : http://www.onlinewebfonts.com/icon "),Xe=a.createElement("g",null,a.createElement("g",null,a.createElement("path",{d:"M990,500c0-270.6-219.4-490-490-490C229.4,10,10,229.4,10,500c0,270.6,219.4,490,490,490C770.6,990,990,770.6,990,500L990,500z M132.5,500c0-202.7,164.8-367.5,367.5-367.5S867.5,297.3,867.5,500S702.7,867.5,500,867.5S132.5,702.7,132.5,500z"}),a.createElement("path",{d:"M561.1,684.3V461.8l79.2,80.7c24,23.7,62.8,23.7,86.8,0c24-23.7,24-62.2,0-86L545.4,272.8C533.9,261.4,518.3,255,502,255c-0.7,0-1.4,0-2.1,0.1c-0.7,0-1.4-0.1-2.1-0.1c-16.3,0-31.9,6.4-43.4,17.8L272.7,456.5c-24,23.7-24,62.2,0,86c24,23.7,62.8,23.7,86.8,0l79.2-80.7v222.5c0,33.5,27.2,60.7,60.7,60.7h1.1C534,745,561.1,717.8,561.1,684.3L561.1,684.3z"})));function Je(e,t){var n=e.title,c=e.titleId,r=We(e,["title","titleId"]);return a.createElement("svg",Ye({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000",enableBackground:"new 0 0 1000 1000",xmlSpace:"preserve",ref:t,"aria-labelledby":c},r),n?a.createElement("title",{id:c},n):null,Qe,Xe)}var Ke=a.forwardRef(Je);n.p;function Ze(){return(Ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}function $e(e,t){if(null==e)return{};var n,c,a=function(e,t){if(null==e)return{};var n,c,a={},r=Object.keys(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var et=a.createElement("metadata",null," Svg Vector Icons : http://www.onlinewebfonts.com/icon "),tt=a.createElement("g",null,a.createElement("g",null,a.createElement("path",{d:"M990,500c0-270.6-219.4-490-490-490C229.4,10,10,229.4,10,500c0,270.6,219.4,490,490,490C770.6,990,990,770.6,990,500z M101.9,500c0-219.9,178.2-398.1,398.1-398.1c219.9,0,398.1,178.2,398.1,398.1c0,219.9-178.2,398.1-398.1,398.1C280.1,898.1,101.9,719.9,101.9,500z M543.3,788.3l245-245c23.9-23.9,23.9-62.7,0-86.6c-23.9-23.9-62.7-23.9-86.6,0L561.3,597.1V255c0-33.8-27.4-61.2-61.2-61.2s-61.2,27.4-61.2,61.2v342.1L298.3,456.7c-23.9-23.9-62.7-23.9-86.6,0c-12,12-17.9,27.6-17.9,43.3c0,15.7,6,31.4,17.9,43.3l245,245C480.6,812.2,519.4,812.2,543.3,788.3z"})),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null),a.createElement("g",null));function nt(e,t){var n=e.title,c=e.titleId,r=$e(e,["title","titleId"]);return a.createElement("svg",Ze({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 1000 1000",enableBackground:"new 0 0 1000 1000",xmlSpace:"preserve",ref:t,"aria-labelledby":c},r),n?a.createElement("title",{id:c},n):null,et,tt)}var ct=a.forwardRef(nt);n.p,n(143);function at(){return(at=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}function rt(e,t){if(null==e)return{};var n,c,a=function(e,t){if(null==e)return{};var n,c,a={},r=Object.keys(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var st=a.createElement("g",null,a.createElement("g",null,a.createElement("path",{d:"M187.722,102.856V17.062C187.719,7.636,180.076-0.003,170.65,0c-4.834,0.001-9.44,2.053-12.676,5.644L4.375,176.311 c-5.617,6.256-5.842,15.67-0.529,22.187l153.6,187.733c5.968,7.295,16.72,8.371,24.016,2.403c3.952-3.233,6.249-8.066,6.26-13.172 v-85.043c134.827,4.386,218.965,62.02,256.888,175.787c2.326,6.96,8.841,11.653,16.179,11.656c0.92,0.003,1.84-0.072,2.748-0.222 c8.256-1.347,14.319-8.479,14.319-16.845C477.855,259.818,356.87,112.174,187.722,102.856z M170.655,255.995 c-9.426,0-17.067,7.641-17.067,17.067v54.613L39.532,188.257l114.057-126.72v57.924c0,9.426,7.641,17.067,17.067,17.067 c134.144,0,234.53,92.826,264.124,234.462C379.841,294.6,291.385,255.995,170.655,255.995z"}))),it=a.createElement("g",null),lt=a.createElement("g",null),ot=a.createElement("g",null),ut=a.createElement("g",null),dt=a.createElement("g",null),jt=a.createElement("g",null),bt=a.createElement("g",null),pt=a.createElement("g",null),ht=a.createElement("g",null),Ot=a.createElement("g",null),ft=a.createElement("g",null),xt=a.createElement("g",null),mt=a.createElement("g",null),vt=a.createElement("g",null),gt=a.createElement("g",null);function _t(e,t){var n=e.title,c=e.titleId,r=rt(e,["title","titleId"]);return a.createElement("svg",at({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 477.862 477.862",style:{enableBackground:"new 0 0 477.862 477.862"},xmlSpace:"preserve",ref:t,"aria-labelledby":c},r),n?a.createElement("title",{id:c},n):null,st,it,lt,ot,ut,dt,jt,bt,pt,ht,Ot,ft,xt,mt,vt,gt)}var yt=a.forwardRef(_t);n.p;var Et=Object(u.h)((function(e){return Object(c.jsx)("div",{style:{display:"inline-block"},onClick:function(){return e.history.goBack()},children:Object(c.jsxs)("span",{style:{display:"flex",alignSelf:"center",margin:"10px 0 0",padding:"10px 15px",borderRadius:"5px",cursor:"pointer",border:"2px solid black"},children:[Object(c.jsx)(yt,{style:{height:"24px",width:"auto"}}),Object(c.jsx)("b",{style:{marginLeft:"10px"},children:"Go Back"})]})})})),Rt=Object(l.b)((function(e){return{}}))((function(e){var t=Object(a.useState)(""),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)("Bus"),l=Object(b.a)(i,2),o=l[0],u=l[1],j=Object(a.useState)(""),p=Object(b.a)(j,2),h=p[0],f=p[1],x=Object(a.useState)(""),m=Object(b.a)(x,2),v=m[0],y=m[1],S=Object(a.useState)(""),w=Object(b.a)(S,2),C=w[0],k=w[1],T=Object(a.useState)(!1),N=Object(b.a)(T,2),A=N[0],I=N[1],D=Object(a.useState)(!1),F=Object(b.a)(D,2),U=F[0],L=F[1],B=Object(a.useState)(!1),M=Object(b.a)(B,2),V=M[0],P=M[1],G=Object(a.useState)(!1),z=Object(b.a)(G,2),q=z[0],H=z[1],Y=Object(a.useState)(""),W=Object(b.a)(Y,2),Q=W[0],X=W[1],J=Object(a.useState)(""),K=Object(b.a)(J,2),Z=K[0],$=K[1],ee=Object(a.useState)(""),te=Object(b.a)(ee,2),ne=te[0],ce=te[1],ae=function(e){u(e.target.value)},re=function(e){e&&X(e),H(!q)},se=function(e){return d.b.error("".concat(e," field is required"))};return Object(c.jsxs)("div",{style:{position:"relative",flexGrow:"1",boxSizing:"border-box",width:"100%"},children:[q&&Object(c.jsx)(ke,{addImage:function(e,t){"front side"===t?$(e):ce(e)},toggleCamera:re,destination:Q,mode:"environment"}),Object(c.jsxs)("div",{className:"container add_vehicle",style:{width:"100%"},children:[Object(c.jsx)(Et,{}),Object(c.jsx)("h4",{children:"Add Vehicle"}),Object(c.jsx)("hr",{}),Object(c.jsxs)("form",{className:"form_add_vehicle",onSubmit:function(t){if(t.preventDefault(),""===r.trim())return se("Vehicle tag / License Plate"),!1;if(""===h.trim())return se("Passenger seats"),!1;if(""===v.trim())return se("Make / Model"),!1;if(""===C.trim())return se("Color"),!1;var n={plate:r,type_of_vehicle:o,seats:h,model:v,color:C,vehicle_image_front:Z,vehicle_image_left:ne};e.dispatch(function(e,t){return function(){var n=Object(_.a)(g.a.mark((function n(c){var a;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,E.a.post("".concat(R,"/vehicle/").concat(O()._id),e,De);case 3:a=n.sent,c({type:"ADD_VEHICLE_SUCCESS",payload:a.data}),d.b.success("Vehicle was added"),t.push("/vehicles"),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),c({type:"ADD_VEHICLE_ERROR",payload:n.t0}),d.b.error("Error to add the vehicle to DB");case 13:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}(n,e.history))},children:[Object(c.jsxs)("label",{style:{marginBottom:"10px",display:"block"},children:[Object(c.jsx)("span",{style:{display:"block"},children:"Vehicle tag / License Plate"}),Object(c.jsx)("input",{type:"text",value:r,onChange:function(e){return s(e.target.value)}})]}),Object(c.jsxs)("div",{className:"add_vehicle_container",children:[Object(c.jsxs)("div",{className:"add_vehicle--item",children:[Object(c.jsx)("input",{type:"radio",name:"typeVehicle",value:"Bus",id:"Bus",onChange:ae,checked:"Bus"===o}),Object(c.jsx)("label",{htmlFor:"Bus",children:"Bus / Van"})]}),Object(c.jsxs)("div",{className:"add_vehicle--item",children:[Object(c.jsx)("input",{type:"radio",name:"typeVehicle",value:"Car",id:"Car",onChange:ae,checked:"Car"===o}),Object(c.jsx)("label",{htmlFor:"Car",children:"Car"})]}),Object(c.jsxs)("div",{className:"add_vehicle--item",children:[Object(c.jsx)("input",{type:"radio",name:"typeVehicle",value:"SUV",id:"SUV",onChange:ae,checked:"SUV"===o}),Object(c.jsx)("label",{htmlFor:"SUV",children:"SUV"})]})]}),Object(c.jsxs)("label",{style:{marginBottom:"10px",display:"block"},children:[Object(c.jsxs)("span",{style:{cursor:"pointer",display:"flex",alignItems:"center"},onClick:function(){return I(!A)},children:[Object(c.jsx)("span",{children:"Passenger seats"})," ",A?Object(c.jsx)(Ke,{}):Object(c.jsx)(ct,{})]}),A&&Object(c.jsx)("input",{type:"text",value:h,onChange:function(e){return f(e.target.value)}})]}),Object(c.jsxs)("label",{style:{marginBottom:"10px",display:"block"},children:[Object(c.jsxs)("span",{style:{cursor:"pointer",display:"flex",alignItems:"center"},onClick:function(){return L(!U)},children:[Object(c.jsx)("span",{children:"Make / Model"}),U?Object(c.jsx)(Ke,{}):Object(c.jsx)(ct,{})]}),U&&Object(c.jsx)("input",{type:"text",value:v,onChange:function(e){return y(e.target.value)}})]}),Object(c.jsxs)("label",{style:{marginBottom:"10px",display:"block"},children:[Object(c.jsxs)("span",{style:{cursor:"pointer",display:"flex",alignItems:"center"},onClick:function(){return P(!V)},children:["Color ",V?Object(c.jsx)(Ke,{}):Object(c.jsx)(ct,{})]}),V&&Object(c.jsx)("input",{type:"text",value:C,onChange:function(e){return k(e.target.value)}})]}),Object(c.jsxs)("span",{style:{marginBottom:"10px",display:"flex",cursor:"pointer"},onClick:function(){return re("front side")},className:"take-photo",children:[Object(c.jsx)("span",{children:"Upload image of vehicle front side"}),Object(c.jsx)(Ce,{style:{height:"24px",maxWidth:"24px",marginLeft:"10px"}})]}),Z&&Object(c.jsxs)("div",{className:"add__vahicle--image--container",children:[Object(c.jsx)("img",{src:Z,alt:"vehicle front"}),Object(c.jsx)("button",{onClick:function(){return $("")},className:"add-vehicle--button",children:"X"})]}),Object(c.jsxs)("div",{style:{marginBottom:"10px",display:"flex",cursor:"pointer"},onClick:function(){return re("left side")},className:"take-photo",children:[Object(c.jsx)("span",{children:"Upload image of vehicle left side"}),Object(c.jsx)(Ce,{style:{height:"24px",maxWidth:"24px",marginLeft:"10px"}})]}),ne&&Object(c.jsxs)("div",{className:"add__vahicle--image--container",children:[Object(c.jsx)("img",{src:ne,alt:"vehicle left"}),Object(c.jsx)("button",{onClick:function(){return ce("")},className:"add-vehicle--button",children:"X"})]}),Object(c.jsx)("button",{type:"submit",className:"profile__button",children:"Save"})]})]})]})}));function St(){var e={textDecoration:"underline",textShadow:"3px 3px 10px rgb(15,15,15)"};return Object(c.jsxs)("div",{style:{marginBottom:"15px"},children:[Object(c.jsx)(o.c,{to:"/admin/cities",className:"account_link",activeStyle:e,children:"Cities"})," |",Object(c.jsx)(o.c,{to:"/admin/users",className:"account_link",activeStyle:e,children:"Users"})," |",Object(c.jsx)(o.c,{to:"/admin/vehicles",className:"account_link",activeStyle:e,children:"Vehicles"})," |",Object(c.jsx)(o.c,{to:"/admin/routes",className:"account_link",activeStyle:e,children:"Routes"})," |",Object(c.jsx)(o.c,{to:"/admin/advertisement",className:"account_link",activeStyle:e,children:"Advertisement"})," |",Object(c.jsx)(o.c,{to:"/admin/faq",className:"account_link",activeStyle:e,children:"FAQ"}),Object(c.jsx)("hr",{})]})}n(144);var wt={headers:{"Content-Type":"application/json"}},Ct=function(e){return function(){var t=Object(_.a)(g.a.mark((function t(n){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.post("".concat(R,"/admin/route"),e,wt);case 3:return c=t.sent,n({type:"ADD_ROUTE",payload:c.data}),t.abrupt("return",c);case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),n({type:"ADD_ROUTE_ERROR"}),d.b.error("Something went wrong");case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()},kt=function(e){return function(){var t=Object(_.a)(g.a.mark((function t(n){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.get("".concat(R,"/admin/route/").concat(e));case 3:c=t.sent,n({type:"GET_CURRENT_ROUTE",payload:c.data}),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0),n({type:"GET_CURRENT_ROUTE_ERROR"});case 11:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},Tt=function(e,t,n){return function(){var c=Object(_.a)(g.a.mark((function c(a){var r;return g.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,E.a.put("".concat(R,"/admin/route/").concat(e),t,wt);case 3:r=c.sent,a({type:"UPDATE_ROUTE",payload:r.data}),d.b.success("Route was updated"),n.push("/admin/routes"),c.next=14;break;case 9:c.prev=9,c.t0=c.catch(0),console.log(c.t0),a({type:"UPDATE_ROUTE_ERROR"}),d.b.error("Something went wrong");case 14:case"end":return c.stop()}}),c,null,[[0,9]])})));return function(e){return c.apply(this,arguments)}}()},Nt=n(24),At=n.n(Nt);function It(e){var t=e.user,n=e.userForEdit,r=e.deleteUser,s=e.activatingUser;return Object(c.jsxs)(a.Fragment,{children:[Object(c.jsx)("td",{className:"users__form-email",children:t.email}),Object(c.jsx)("td",{className:"users__form-email",children:t.mobileNumber}),Object(c.jsx)("td",{className:"users__form-email",children:At()(t.createdAt).format("YYYY/MM/DD")}),Object(c.jsx)("td",{children:t.name}),Object(c.jsx)("td",{children:t.role}),Object(c.jsx)("td",{children:Object(c.jsxs)("div",{className:"users__form--btns",children:[Object(c.jsx)("button",{type:"button",onClick:n(t),children:"Edit"}),Object(c.jsx)("button",{type:"button",onClick:function(){return s(t)},style:{color:t.activation&&"red"},children:"Active"}),Object(c.jsx)("button",{type:"button",onClick:function(){return r(t._id)},children:"Delete"})]})})]})}var Dt=n(19),Ft=(n(145),Object(l.b)()((function(e){var t=Object(a.useState)({email:"",mobileNumber:"",createdAt:"",name:"",role:""}),n=Object(b.a)(t,2),r=n[0],s=n[1];Object(a.useEffect)((function(){var t=Object(j.a)(Object(j.a)({},e.user),{},{createdAt:At()(e.user.createAt).format("YYYY/MM/DD")});s(t)}),[e.user]);var i=function(e){s(Object(j.a)(Object(j.a)({},r),{},Object(Dt.a)({},e.target.name,e.target.value)))};return Object(c.jsx)("div",{className:"users__modal",children:Object(c.jsxs)("form",{className:"users__form--modal",onSubmit:function(t){var n,c;t.preventDefault(),e.dispatch((n=r,c=e.user._id,function(){var e=Object(_.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.put("".concat(R,"/admin/users/").concat(c),n,wt);case 3:return a=e.sent,t({type:"UPDATE_USER_BY_ADMIN",payload:a.data}),d.b.success("User was updated"),e.abrupt("return",a.data);case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t({type:"UPDATE_USER_BY_ADMIN_ERROR"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())),e.toggleModal()},children:[Object(c.jsx)("div",{style:{textTransform:"uppercase",fontWeight:"700",color:"#901CE8"},children:"Edit User"}),Object(c.jsx)("hr",{}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{children:"Email"}),Object(c.jsx)("input",{type:"email",name:"email",value:r.email,disabled:!0})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{children:"Phone"}),Object(c.jsx)("input",{type:"text",name:"mobileNumber",value:r.mobileNumber,onChange:i})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{children:"Join Date"}),Object(c.jsx)("input",{type:"text",name:"createAt",value:r.createdAt,disabled:!0})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{children:"Name"}),Object(c.jsx)("input",{type:"text",name:"name",value:r.name,onChange:i})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{children:"User Type"}),Object(c.jsx)("input",{type:"text",name:"role",value:r.role,onChange:i})]}),Object(c.jsx)("button",{type:"cancel",className:"clear__button",onClick:function(t){t.preventDefault(),e.toggleModal()},children:"Cancel"}),Object(c.jsx)("button",{type:"submit",className:"route-add-edit__submit",children:"Save"})]})})}))),Ut=Object(l.b)((function(e){return{users:e.admin.users,loading:e.admin.loading,error:e.admin.error}}))((function(e){var t=Object(a.useState)(!0),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)([]),l=Object(b.a)(i,2),o=l[0],u=l[1],j=Object(a.useState)(!1),p=Object(b.a)(j,2),h=p[0],O=p[1],f=Object(a.useState)({}),x=Object(b.a)(f,2),m=x[0],v=x[1];Object(a.useEffect)((function(){e.dispatch(function(){var e=Object(_.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("".concat(R,"/admin/users"));case 3:n=e.sent,t({type:"ADMIN_GET_USERS",payload:n.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t({type:"ADMIN_GET_USERS_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(a.useEffect)((function(){e.users&&(u(e.users),s(e.loading))}),[e.users]);var y=function(e){return function(t){t.preventDefault(),C(),v(e)}},S=function(t){e.dispatch(function(e){return function(){var t=Object(_.a)(g.a.mark((function t(n){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.delete("".concat(R,"/admin/users/").concat(e));case 3:c=t.sent,n({type:"DELETE_USER_BY_ADMIN",payload:c.data}),d.b.success("User was deleted"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),n({type:"DELETE_USER_BY_ADMIN_ERROR"});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))},w=function(t){var n,c;e.dispatch((n=t._id,c={activation:!t.activation},function(){var e=Object(_.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.put("".concat(R,"/admin/user/activating/").concat(n),c);case 3:a=e.sent,t({type:"ACTIVATING_USER",payload:a.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t({type:"ACTIVATING_USER_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))},C=function(){return O(!h)};return Object(c.jsx)("div",{style:{position:"relative",flexGrow:"1",boxSizing:"border-box",width:"100%"},children:Object(c.jsxs)("div",{className:"admin__users container",children:[Object(c.jsx)("h3",{children:"ADMIN"}),Object(c.jsx)(St,{}),h&&Object(c.jsx)(Ft,{user:m,toggleModal:C}),r?Object(c.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"},children:Object(c.jsx)(oe.a,{})}):Object(c.jsxs)("table",{className:"admin__table",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Email"}),Object(c.jsx)("th",{children:"Phone"}),Object(c.jsx)("th",{children:"Join Date"}),Object(c.jsx)("th",{children:"Name"}),Object(c.jsx)("th",{children:"User Type"}),Object(c.jsx)("th",{children:"Status"})]})}),Object(c.jsx)("tbody",{children:o&&o.map((function(e){return Object(c.jsx)("tr",{children:Object(c.jsx)(It,{user:e,userForEdit:y,deleteUser:S,activatingUser:w})},e._id)}))})]})]})})})),Lt=(n(146),function(e){var t=e.vehicle,n=e.vehicleForEdit,r=e.deleteVehicle,s=e.activatingVehicle;return Object(c.jsxs)(a.Fragment,{children:[Object(c.jsx)("td",{className:"users__form-email",children:"".concat(t.type_of_vehicle," / ").concat(t.plate)}),Object(c.jsx)("td",{children:t.model}),Object(c.jsx)("td",{children:t.seats}),Object(c.jsx)("td",{children:t.color}),Object(c.jsx)("td",{className:"users__form-email",children:At()(t.createdAt).format("YYYY/MM/DD")}),Object(c.jsx)("td",{children:Object(c.jsxs)("div",{className:"users__form--btns",children:[Object(c.jsx)("button",{type:"button",onClick:n(t),children:"Edit"}),Object(c.jsx)("button",{type:"button",onClick:function(){return s(t)},style:{color:t.activation&&"red"},children:"Active"}),Object(c.jsx)("button",{type:"button",onClick:function(){return r(t)},children:"Delete"})]})})]})}),Bt=(n(147),Object(l.b)()((function(e){var t=Object(a.useState)({plate:"",type_of_vehicle:"",createAt:"",model:"",seats:"",color:""}),n=Object(b.a)(t,2),r=n[0],s=n[1];Object(a.useEffect)((function(){var t=Object(j.a)(Object(j.a)({},e.vehicle),{},{createdAt:At()(e.vehicle.createdAt).format("YYYY/MM/DD")});s(t)}),[e.vehicle]);var i=function(e){s(Object(j.a)(Object(j.a)({},r),{},Object(Dt.a)({},e.target.name,e.target.value)))};return Object(c.jsx)("div",{className:"vehicles__modal",children:Object(c.jsxs)("form",{className:"vehicles__form--modal",onSubmit:function(t){var n,c;t.preventDefault(),e.dispatch((n=r,c=e.vehicle._id,function(){var e=Object(_.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.put("".concat(R,"/admin/vehicles/").concat(c),n,wt);case 3:a=e.sent,t({type:"UPDATE_VEHICLE_BY_ADMIN",payload:a.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t({type:"UPDATE_VEHICLE_BY_ADMIN_ERROR",payload:e.t0.error});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())),e.toggleModal()},children:[Object(c.jsx)("div",{style:{textTransform:"uppercase",fontWeight:"700",color:"#901CE8"},children:"Edit Vehicle"}),Object(c.jsx)("hr",{}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{children:"Type"}),Object(c.jsx)("input",{type:"text",name:"type_of_vehicle",value:r.type_of_vehicle,onChange:i})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{children:"Plate"}),Object(c.jsx)("input",{type:"text",name:"plate",value:r.plate,onChange:i})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{children:"Model"}),Object(c.jsx)("input",{type:"text",name:"model",value:r.model,onChange:i})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{children:"Seats"}),Object(c.jsx)("input",{type:"number",name:"seats",value:r.seats,onChange:i})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{children:"Color"}),Object(c.jsx)("input",{type:"text",name:"color",value:r.color,onChange:i})]}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{children:"Reg Date"}),Object(c.jsx)("input",{type:"text",name:"createAt",value:r.createdAt,disabled:!0})]}),Object(c.jsx)("button",{type:"cancel",className:"clear__button",onClick:function(t){t.preventDefault(),e.toggleModal()},children:"Cancel"}),Object(c.jsx)("button",{type:"submit",className:"route-add-edit__submit",children:"Save"})]})})}))),Mt=Object(l.b)((function(e){return{vehicles:e.admin.vehicles,loading:e.admin.loading,error:e.admin.error}}))((function(e){var t=Object(a.useState)(!0),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)([]),l=Object(b.a)(i,2),o=l[0],u=l[1],j=Object(a.useState)(!1),p=Object(b.a)(j,2),h=p[0],O=p[1],f=Object(a.useState)({}),x=Object(b.a)(f,2),m=x[0],v=x[1];Object(a.useEffect)((function(){localStorage.user&&e.dispatch(function(){var e=Object(_.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("".concat(R,"/admin/vehicles"));case 3:n=e.sent,t({type:"ADMIN_GET_VEHICLES",payload:n.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t({type:"ADMIN_GET_VEHICLES_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(a.useEffect)((function(){e.vehicles&&(u(e.vehicles),s(e.loading))}),[e.vehicles]);var y=function(e){return function(t){t.preventDefault(),S(),v(e)}},S=function(){return O(!h)},w=function(t){var n;e.dispatch((n=t._id,function(){var e=Object(_.a)(g.a.mark((function e(t){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.delete("".concat(R,"/admin/vehicles/").concat(n));case 3:c=e.sent,t({type:"DELETE_VEHICLE_BY_ADMIN",payload:c.data}),d.b.success("Vehicle was deleted"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t({type:"DELETE_VEHICLE_BY_ADMIN_ERROR"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))},C=function(t){var n,c;e.dispatch((n=t._id,c={activation:!t.activation},function(){var e=Object(_.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.put("".concat(R,"/admin/vehicle/activating/").concat(n),c);case 3:a=e.sent,t({type:"ACTIVATING_VEHICLE",payload:a.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t({type:"ACTIVATING_VEHICLE_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))};return Object(c.jsx)("div",{style:{position:"relative",flexGrow:"1",boxSizing:"border-box",width:"100%"},children:Object(c.jsxs)("div",{className:"admin__users container",children:[Object(c.jsx)("h3",{children:"ADMIN"}),Object(c.jsx)(St,{}),h&&Object(c.jsx)(Bt,{vehicle:m,toggleModal:S}),r?Object(c.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"},children:Object(c.jsx)(oe.a,{})}):Object(c.jsxs)("table",{className:"admin__table",children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Type / Plate"}),Object(c.jsx)("th",{children:"Model"}),Object(c.jsx)("th",{children:"Seats"}),Object(c.jsx)("th",{children:"Color"}),Object(c.jsx)("th",{children:"Reg Date"}),Object(c.jsx)("th",{children:"Status"})]})}),Object(c.jsx)("tbody",{children:o&&o.map((function(e){return Object(c.jsx)("tr",{children:Object(c.jsx)(Lt,{vehicle:e,vehicleForEdit:y,deleteVehicle:w,activatingVehicle:C})},e._id)}))})]})]})})}));n(148);var Vt=function(e){var t=e.route,n=e.deleteRoute,r=e.activatingRoute,s=Object(u.g)();return Object(c.jsxs)(a.Fragment,{children:[Object(c.jsx)("td",{children:t.city.city}),Object(c.jsxs)("td",{colSpan:"2",children:["#",t.number," ",t.name]}),Object(c.jsx)("td",{children:Object(c.jsx)("button",{type:"button",className:"details_edit--button",onClick:function(){return s.push("/admin/route_detail_edit/".concat(t._id))},children:"Edit"})}),Object(c.jsx)("td",{children:Object(c.jsxs)("div",{className:"users__form--btns",children:[Object(c.jsx)("button",{type:"button",onClick:function(){return s.push("/admin/route_add_edit/".concat(t._id))},children:"Edit"}),Object(c.jsx)("button",{type:"button",onClick:function(){return r(t)},style:{color:t.activation&&"red"},children:"Active"}),Object(c.jsx)("button",{type:"button",onClick:function(){return n(t._id)},children:"Delete"})]})})]})},Pt=Object(l.b)((function(e){return{routes:e.admin.routes}}))((function(e){var t=Object(a.useState)(!0),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)([]),l=Object(b.a)(i,2),u=l[0],j=l[1];Object(a.useEffect)((function(){e.dispatch(function(){var e=Object(_.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("".concat(R,"/admin/routes/undefined"));case 3:n=e.sent,t({type:"GET_ROUTES",payload:n.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t({type:"GET_ROUTES_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(a.useEffect)((function(){e.routes&&(j(e.routes),s(e.loading))}),[e.routes]);var p=function(t){e.dispatch(function(e){return function(){var t=Object(_.a)(g.a.mark((function t(n){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.delete("".concat(R,"/admin/route/").concat(e));case 3:c=t.sent,n({type:"DELETE_ROUTE",payload:c.data}),d.b.success("Route was deleted"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),n({type:"DELETE_ROUTE_ERROR"});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))},h=function(t){var n,c;e.dispatch((n=t._id,c={activation:!t.activation},function(){var e=Object(_.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.put("".concat(R,"/admin/route/activating/").concat(n),c);case 3:a=e.sent,t({type:"ACTIVATING_ROUTE",payload:a.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t({type:"ACTIVATING_ROUTE_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))};return Object(c.jsx)("div",{style:{flexGrow:"1",boxSizing:"border-box",width:"100%"},children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("h3",{children:"ADMIN"}),Object(c.jsx)(St,{}),Object(c.jsx)(o.b,{to:"/admin/route_add_edit/new",className:"add_route--link",children:"Add Route"}),Object(c.jsx)("hr",{style:{marginTop:"15px"}}),r?Object(c.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"},children:Object(c.jsx)(oe.a,{})}):Object(c.jsxs)("table",{className:"admin__table",style:{marginTop:"20px"},children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"City"}),Object(c.jsx)("th",{colSpan:"2",children:"Route Name"}),Object(c.jsx)("th",{children:"Details"}),Object(c.jsx)("th",{children:"Status"})]})}),Object(c.jsx)("tbody",{children:u.map((function(e){return Object(c.jsx)("tr",{children:Object(c.jsx)(Vt,{route:e,deleteRoute:p,activatingRoute:h})},e._id)}))})]})]})})}));n(149);function Gt(e){var t=e.stop,n=e.index,r=e.feature,s=e.handleChangeStop,i=e.deleteStop,l=e.type,o=e.color,u=Object(a.useState)({name_of_stop:"",latitude:"",longitude:""}),d=Object(b.a)(u,2),p=d[0],h=d[1],O=Object(a.useState)(!1),f=Object(b.a)(O,2),x=f[0],m=f[1];Object(a.useEffect)((function(){h(t)}),[t]);var v=function(e){h(Object(j.a)(Object(j.a)({},p),{},Object(Dt.a)({},e.target.name,e.target.value)))};return Object(c.jsxs)(a.Fragment,{children:[Object(c.jsx)("td",{className:"users__form-email",colSpan:"3",style:{backgroundColor:o||""},children:x?Object(c.jsx)("input",{type:"text",value:p.name_of_stop,name:"name_of_stop",placeholder:"Name of Stop",onChange:v,required:!0}):Object(c.jsx)("span",{children:p.name_of_stop?p.name_of_stop:Object(c.jsx)("i",{children:r})})}),Object(c.jsx)("td",{children:x?Object(c.jsx)("input",{type:"text",value:p.latitude,name:"latitude",placeholder:"latitude",onChange:v,required:!0}):Object(c.jsx)("span",{children:p.latitude})}),Object(c.jsx)("td",{children:x?Object(c.jsx)("input",{type:"text",value:p.longitude,name:"longitude",placeholder:"longitude",onChange:v,required:!0}):Object(c.jsx)("span",{children:p.longitude})}),Object(c.jsx)("td",{children:Object(c.jsx)("div",{className:"users__form--btns",children:x?Object(c.jsxs)(a.Fragment,{children:[Object(c.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),s(p,n,l),m(!1)},children:"Save"}),Object(c.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),m(!1),h(t)},children:"Cancel"})]}):Object(c.jsxs)(a.Fragment,{children:[Object(c.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),m(!0)},children:p.name_of_stop?"Edit":"Add"}),Object(c.jsx)("button",{type:"button",children:"Active"}),Object(c.jsx)("button",{type:"button",onClick:function(){return i(n,l)},children:"Delete"})]})})})]})}var zt=Object(l.b)((function(e){return{currentRoute:e.admin.currentRoute,loading:e.admin.loading,cities:e.cities.cities}}))((function(e){var t=Object(a.useState)({name:"",logo:"",number:"",stops:[{name_of_stop:"",latitude:"",longitude:""},{name_of_stop:"",latitude:"",longitude:""}]}),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)({name:"",logo:"",number:"",stops:[{name_of_stop:"",latitude:"",longitude:""},{name_of_stop:"",latitude:"",longitude:""}]}),l=Object(b.a)(i,2),o=l[0],u=l[1],p=Object(a.useState)([]),h=Object(b.a)(p,2),O=h[0],f=h[1],x=Object(a.useState)([]),m=Object(b.a)(x,2),v=m[0],g=m[1],_=Object(a.useState)([]),y=Object(b.a)(_,2),E=y[0],R=y[1],S=Object(a.useState)(""),w=Object(b.a)(S,2),C=w[0],k=w[1],T=Object(a.useState)(!0),N=Object(b.a)(T,2),A=N[0],I=N[1],D=Object(a.useState)(),F=Object(b.a)(D,2),U=F[0],L=F[1];Object(a.useEffect)((function(){"new"!==e.match.params.id?(e.dispatch(kt(e.match.params.id)),L(!1)):L(!0)}),[]),Object(a.useEffect)((function(){e.dispatch(ie())}),[]),Object(a.useEffect)((function(){e.cities&&R(e.cities)}),[e.cities]),Object(a.useEffect)((function(){E.length&&k(E[0].city)}),[E]),Object(a.useEffect)((function(){if(e.currentRoute._id){var t=e.currentRoute,n=t.stops.splice(1,t.stops.length-2);f(n),s(t),k(e.currentRoute.city.city),I(e.loading)}else I(!1)}),[e.currentRoute]);var B=function(e,t,n){if("start_finish"===n){var c=Object(ge.a)(r.stops);c[t]=e,s(Object(j.a)(Object(j.a)({},r),{},{stops:c}))}else{var a=Object(ge.a)(O);a[t]=e,f(a)}},M=function(e,t,n){if("start_finish"===n){var c=Object(ge.a)(o.stops);c[t]=e,u(Object(j.a)(Object(j.a)({},o),{},{stops:c}))}else{var a=Object(ge.a)(v);a[t]=e,g(a)}},V=function(e){s(Object(j.a)(Object(j.a)({},r),{},Object(Dt.a)({},e.target.name,e.target.value)))},P=function(e,t){if("start_finish"===t){var n=Object(ge.a)(r.stops);n.splice(e,1),s(Object(j.a)(Object(j.a)({},r),{},{stops:n}))}else{var c=Object(ge.a)(O);c.splice(e,1),f(c)}},G=function(e,t){if("start_finish"===t){var n=Object(ge.a)(o.stops);n.splice(e,1),u(Object(j.a)(Object(j.a)({},o),{},{stops:n}))}else{var c=Object(ge.a)(v);c.splice(e,1),g(c)}};return Object(c.jsx)("div",{style:{flexGrow:"1",boxSizing:"border-box",width:"100%"},children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)(Et,{}),Object(c.jsx)("h4",{children:"New/Edit Route"}),Object(c.jsx)("hr",{}),A?Object(c.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"},children:Object(c.jsx)(oe.a,{})}):Object(c.jsxs)("form",{className:"route-add-edit__form",onSubmit:function(t){if(t.preventDefault(),!C)return d.b.error("Please choose city");var n=r.stops,c=o.stops;n.splice.apply(n,[1,0].concat(Object(ge.a)(O))),c.splice.apply(c,[1,0].concat(Object(ge.a)(v))),f([]),g([]),s(Object(j.a)(Object(j.a)({},r),{},{stops:n,city:C})),u(Object(j.a)(Object(j.a)({},o),{},{stops:c,city:C,number:r.number}));var a=C?E.filter((function(e){return e.city===C}))[0]._id:E[0]._id,i=Object(j.a)(Object(j.a)({},r),{},{stops:n,city:a}),l=Object(j.a)(Object(j.a)({},o),{},{stops:c.reverse(),city:a,number:r.number}),b=r.logo,p=r.name,h=r.stops,x=r.number;"new"!==e.match.params.id?e.dispatch(Tt(r._id,{city:a,logo:b,number:x,name:p,stops:h},e.history)):e.dispatch(Ct(i)).then((function(){e.dispatch(Ct(l)).then((function(){d.b.success("Routes was added"),e.history.push("/admin/routes")}))}))},children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{children:"City"}),Object(c.jsx)("select",{className:"choose__city--select",value:C,onChange:function(e){return k(e.target.value)},children:E.length>0&&E.map((function(e){return Object(c.jsx)("option",{children:e.city},e._id)}))})]}),Object(c.jsx)("hr",{}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{children:"Route Number"}),Object(c.jsx)("input",{type:"text",name:"number",value:"".concat(r.number),onChange:V,required:!0})]}),Object(c.jsx)("hr",{}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{children:"Route Name"}),Object(c.jsx)("input",{type:"text",name:"name",value:r.name,onChange:V,required:!0})]}),U&&Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{children:"Reverse Route Name"}),Object(c.jsx)("input",{style:{backgroundColor:"lightgreen"},type:"text",name:"name",value:o.name,onChange:function(e){u(Object(j.a)(Object(j.a)({},o),{},Object(Dt.a)({},e.target.name,e.target.value)))},required:!0})]}),Object(c.jsx)("hr",{style:{marginBottom:"10px"}}),Object(c.jsxs)("label",{className:"route-add-edit__image",children:[Object(c.jsx)("span",{children:"Logo / Widget"}),Object(c.jsx)("input",{type:"file",name:"logo",onChange:function(e){if(e.target.files&&e.target.files[0]){var t=e.target.files[0],n=new FileReader;n.readAsDataURL(t),n.addEventListener("load",(function(){s(Object(j.a)(Object(j.a)({},r),{},{logo:n.result}))}))}}})]}),r.logo&&Object(c.jsxs)("div",{style:{marginTop:"15px",position:"relative"},children:[Object(c.jsx)("img",{src:r.logo,alt:"route logo",style:{width:"30%"}}),Object(c.jsx)("button",{onClick:function(){return s(Object(j.a)(Object(j.a)({},r),{},{logo:""}))},className:"add-vehicle--button",children:"X"})]}),Object(c.jsxs)("table",{className:"admin__table",style:{marginTop:"15px"},children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{colSpan:"3",children:"Name of stop"}),Object(c.jsx)("th",{children:"Latitude"}),Object(c.jsx)("th",{children:"Longitude"}),Object(c.jsx)("th",{children:"Status"})]})}),Object(c.jsxs)("tbody",{children:[Object(c.jsx)("tr",{children:Object(c.jsx)(Gt,{stop:r.stops[0],feature:"Place of First Stop",index:0,handleChangeStop:B,type:"start_finish",deleteStop:P})}),U&&Object(c.jsx)("tr",{children:Object(c.jsx)(Gt,{stop:o.stops[0],feature:"Place of Last Stop Reverse Route",index:0,handleChangeStop:M,type:"start_finish",deleteStop:G,color:"lightgreen"})}),O.length>0&&O.map((function(e,t){return Object(c.jsxs)(a.Fragment,{children:[Object(c.jsx)("tr",{children:Object(c.jsx)(Gt,{stop:e,index:t,handleChangeStop:B,deleteStop:P})},t),U&&v[t]&&Object(c.jsx)("tr",{children:Object(c.jsx)(Gt,{stop:v[t],index:t,handleChangeStop:M,deleteStop:G,color:"lightgreen"})},t+1e5)]})})),Object(c.jsx)("tr",{children:Object(c.jsx)("td",{colSpan:"5",children:Object(c.jsx)("button",{className:"add_stop",onClick:function(e){e.preventDefault();var t=[].concat(Object(ge.a)(O),[{name_of_stop:"",latitude:"",longitude:""}]);if(U){var n=[].concat(Object(ge.a)(v),[{name_of_stop:"",latitude:"",longitude:""}]);g(n)}f(t)},children:"Add Stop"})})}),Object(c.jsx)("tr",{children:Object(c.jsx)(Gt,{stop:r.stops[r.stops.length-1],handleChangeStop:B,type:"start_finish",deleteStop:P,feature:"Place of Last Stop",index:r.stops.length-1})}),U&&Object(c.jsx)("tr",{children:Object(c.jsx)(Gt,{stop:o.stops[o.stops.length-1],handleChangeStop:M,type:"start_finish",deleteStop:G,feature:"Place of First Stop Reverse Route",index:o.stops.length-1,color:"lightgreen"})})]})]}),Object(c.jsx)("button",{type:"submit",className:"route-add-edit__submit",children:"Save"})]})]})})}));function qt(){return(qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}function Ht(e,t){if(null==e)return{};var n,c,a=function(e,t){if(null==e)return{};var n,c,a={},r=Object.keys(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Yt=a.createElement("g",null),Wt=a.createElement("g",null),Qt=a.createElement("g",null),Xt=a.createElement("g",null),Jt=a.createElement("g",null),Kt=a.createElement("g",null),Zt=a.createElement("g",null),$t=a.createElement("g",null),en=a.createElement("g",null),tn=a.createElement("g",null),nn=a.createElement("g",null),cn=a.createElement("g",null),an=a.createElement("g",null),rn=a.createElement("g",null),sn=a.createElement("g",null);function ln(e,t){var n=e.title,c=e.titleId,r=Ht(e,["title","titleId"]);return a.createElement("svg",qt({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t,"aria-labelledby":c},r),n?a.createElement("title",{id:c},n):null,a.createElement("polygon",{style:{fill:"#E0A02F"},points:"0,118.904 512,118.904 512,75.704 194.848,75.704 169.184,50.312 30.72,50.312 0,81.032 "}),a.createElement("rect",{y:118.904,style:{fill:"#FFCC67"},width:512,height:342.768}),a.createElement("g",{style:{opacity:.5}},a.createElement("rect",{y:449.112,style:{fill:"#E0A02F"},width:512,height:12.576})),a.createElement("rect",{x:20.704,y:97.32,style:{fill:"#FFFFFF"},width:470.592,height:21.584}),Yt,Wt,Qt,Xt,Jt,Kt,Zt,$t,en,tn,nn,cn,an,rn,sn)}var on=a.forwardRef(ln),un=(n.p,n(150),Object(l.b)((function(e){return{currentRoute:e.admin.currentRoute,loading:e.admin.loading}}))((function(e){var t=Object(a.useState)({fare:"",average_travel_time:"",rush_hour:"",image_first_stop:"",image_last_stop:"",about:""}),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(!1),l=Object(b.a)(i,2),o=l[0],u=l[1],p=Object(a.useState)(""),h=Object(b.a)(p,2),O=h[0],f=h[1],x=Object(a.useState)(!0),m=Object(b.a)(x,2),v=m[0],g=m[1];Object(a.useEffect)((function(){e.dispatch(kt(e.match.params.id))}),[]),Object(a.useEffect)((function(){if(e.currentRoute){var t=e.currentRoute,n=t.fare,c=t.average_travel_time,a=t.rush_hour,r=t.image_first_stop,i=t.image_last_stop,l=t.about;s({fare:n,average_travel_time:c,rush_hour:a,image_first_stop:r,image_last_stop:i,about:l}),g(e.loading)}}),[e.currentRoute]);var _=function(e){s(Object(j.a)(Object(j.a)({},r),{},Object(Dt.a)({},e.target.name,e.target.value)))},y=function(e,t){if(e.target.files&&e.target.files[0]){var n=e.target.files[0],c=new FileReader;c.readAsDataURL(n),c.addEventListener("load",(function(){s("first_stop"===t?Object(j.a)(Object(j.a)({},r),{},{image_first_stop:c.result}):Object(j.a)(Object(j.a)({},r),{},{image_last_stop:c.result}))}))}},E=function(e){e&&f(e),u(!o)};return Object(c.jsxs)("div",{style:{flexGrow:"1",boxSizing:"border-box",width:"100%"},children:[o&&Object(c.jsx)(ke,{addImage:function(e,t){s("first_stop"===t?Object(j.a)(Object(j.a)({},r),{},{image_first_stop:e}):Object(j.a)(Object(j.a)({},r),{},{image_last_stop:e}))},toggleCamera:E,destination:O,mode:"environment"}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)(Et,{}),v?Object(c.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"},children:Object(c.jsx)(oe.a,{})}):Object(c.jsxs)("form",{className:"details__edit--form",onSubmit:function(t){t.preventDefault(),e.dispatch(Tt(e.currentRoute._id,r)).then((function(){d.b.success("Route was updated"),e.history.push("/admin/routes")})).catch((function(e){return d.b.error("Something went wrong")}))},children:[Object(c.jsx)("h4",{style:{fontSize:"20px"},children:e.currentRoute.name}),Object(c.jsx)("hr",{}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{className:"details__form--title",children:"Fare"}),Object(c.jsx)("input",{type:"text",name:"fare",value:r.fare,onChange:_})]}),Object(c.jsx)("hr",{}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{className:"details__form--title",children:"Average travel time"}),Object(c.jsx)("input",{type:"text",name:"average_travel_time",value:r.average_travel_time,onChange:_})]}),Object(c.jsx)("hr",{}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{className:"details__form--title",children:"Ruch hour"}),Object(c.jsx)("input",{type:"text",name:"rush_hour",value:r.rush_hour,onChange:_})]}),Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{className:"details__form--title",children:"Browse/Image of First stop"}),Object(c.jsxs)("div",{className:"details__images--btns",children:[Object(c.jsx)("span",{onClick:function(){return E("first_stop")},children:Object(c.jsx)(Ce,{})}),Object(c.jsxs)("label",{children:[Object(c.jsx)(on,{}),Object(c.jsx)("input",{type:"file",onChange:function(e){return y(e,"first_stop")}})]})]}),r.image_first_stop&&Object(c.jsxs)("div",{className:"add__vahicle--image--container",children:[Object(c.jsx)("img",{src:r.image_first_stop,alt:"first stop"}),Object(c.jsx)("button",{onClick:function(){return s(Object(j.a)(Object(j.a)({},r),{},{image_first_stop:""}))},className:"add-vehicle--button",children:"X"})]}),Object(c.jsx)("span",{children:e.currentRoute.stops&&e.currentRoute.stops[0].name_of_stop})]}),Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{children:[Object(c.jsx)("span",{className:"details__form--title",children:"Browse/Image of Last stop"}),Object(c.jsxs)("div",{className:"details__images--btns",children:[Object(c.jsx)("span",{onClick:function(){return E("last_stop")},children:Object(c.jsx)(Ce,{})}),Object(c.jsxs)("label",{children:[Object(c.jsx)(on,{}),Object(c.jsx)("input",{type:"file",onChange:function(e){return y(e,"last_stop")}})]})]}),r.image_last_stop&&Object(c.jsxs)("div",{className:"add__vahicle--image--container",children:[Object(c.jsx)("img",{src:r.image_last_stop,alt:"last stop"}),Object(c.jsx)("button",{onClick:function(){return s(Object(j.a)(Object(j.a)({},r),{},{image_last_stop:""}))},className:"add-vehicle--button",children:"X"})]}),Object(c.jsx)("span",{children:e.currentRoute.stops&&e.currentRoute.stops[e.currentRoute.stops.length-1].name_of_stop})]}),Object(c.jsx)("hr",{}),Object(c.jsx)("textarea",{rows:"6",value:r.about,onChange:_,name:"about"}),Object(c.jsx)("button",{type:"submit",className:"route-add-edit__submit",style:{display:"block"},children:"Save"})]})]})]})}))),dn={headers:{"Content-Type":"application/json"}},jn=(n(151),Object(l.b)((function(e){return{commer:e.advertisments.advertisments,loading:e.advertisments.loading}}))((function(e){var t=Object(a.useState)({header_commer:"",bus_tracker:"",route_detail:"",popup:"",bus_route:"",bus_route_detail:""}),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(!0),l=Object(b.a)(i,2),o=l[0],u=l[1];Object(a.useEffect)((function(){e.dispatch(function(){var e=Object(_.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("".concat(R,"/commer"));case 3:n=e.sent,t({type:"GET_ADVERTS",payload:n.data}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),t({type:"GET_ADVERTS_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(a.useEffect)((function(){e.commer&&e.commer.length>0?(s(e.commer[0]),u(e.loading)):u(!1)}),[e.commer]);var p=function(e){s(Object(j.a)(Object(j.a)({},r),{},Object(Dt.a)({},e.target.name,e.target.value)))};return Object(c.jsx)("div",{style:{position:"relative",flexGrow:"1",boxSizing:"border-box",width:"100%"},children:Object(c.jsxs)("div",{className:"admin__users container",children:[Object(c.jsx)("h3",{children:"Admin"}),Object(c.jsx)(St,{}),o?Object(c.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"},children:Object(c.jsx)(oe.a,{})}):Object(c.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),e.commer.length){var n={header_commer:r.header_commer,bus_tracker:r.bus_tracker,route_detail:r.route_detail,popup:r.popup,bus_route:r.bus_route,bus_route_detail:r.bus_route_detail};e.dispatch(function(e,t){return function(){var n=Object(_.a)(g.a.mark((function n(c){var a;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,E.a.put("".concat(R,"/commer/").concat(e),t);case 3:a=n.sent,c({type:"UPDATE_ADVERTS",payload:a.data}),console.log("response",a),d.b.success("Advertisments were updated"),n.next=14;break;case 9:n.prev=9,n.t0=n.catch(0),console.error(n.t0),c({type:"UPDATE_ADVERTS_ERROR"}),d.b.error("Advertisments were not updated in BD.Try again");case 14:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}(r._id,n))}else e.dispatch(function(e){return function(){var t=Object(_.a)(g.a.mark((function t(n){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e),t.prev=1,t.next=4,E.a.post("".concat(R,"/commer"),e,dn);case 4:c=t.sent,n({type:"ADD_ADVERTS",payload:c.data}),d.b.success("Advertisments were added"),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0),n({type:"ADD_ADVERTS_ERROR"}),d.b.error("Advertisments were not added to BD. Try again.");case 14:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(r))},children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{style:{display:"block",fontWeight:"700"},children:"Advertisment for Header"}),Object(c.jsx)("textarea",{rows:"6",style:{minWidth:"50%"},placeholder:"Paste the code here",name:"header_commer",onChange:p,value:r.header_commer})]}),Object(c.jsx)("button",{type:"button",className:"clear__button",onClick:function(){return s(Object(j.a)(Object(j.a)({},r),{},{header_commer:""}))},children:"Clear"}),Object(c.jsx)("hr",{}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{style:{display:"block",fontWeight:"700"},children:"Advertisment for Bus tracker page"}),Object(c.jsx)("textarea",{rows:"6",style:{minWidth:"50%"},placeholder:"Paste the code here",name:"bus_tracker",onChange:p,value:r.bus_tracker})]}),Object(c.jsx)("button",{type:"button",className:"clear__button",onClick:function(){return s(Object(j.a)(Object(j.a)({},r),{},{bus_tracker:""}))},children:"Clear"}),Object(c.jsx)("hr",{}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{style:{display:"block",fontWeight:"700"},children:"Advertisment for Route detail page"}),Object(c.jsx)("textarea",{rows:"6",style:{minWidth:"50%"},placeholder:"Paste the code here",name:"route_detail",onChange:p,value:r.route_detail})]}),Object(c.jsx)("button",{type:"button",className:"clear__button",onClick:function(){return s(Object(j.a)(Object(j.a)({},r),{},{route_detail:""}))},children:"Clear"}),Object(c.jsx)("hr",{}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{style:{display:"block",fontWeight:"700"},children:"Advertisment for Popup alert"}),Object(c.jsx)("textarea",{rows:"6",style:{minWidth:"50%"},placeholder:"Paste the code here",name:"popup",onChange:p,value:r.popup})]}),Object(c.jsx)("button",{type:"button",className:"clear__button",onClick:function(){return s(Object(j.a)(Object(j.a)({},r),{},{popup:""}))},children:"Clear"}),Object(c.jsx)("hr",{}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{style:{display:"block",fontWeight:"700"},children:"Advertisment for Bus route page"}),Object(c.jsx)("textarea",{rows:"6",style:{minWidth:"50%"},placeholder:"Paste the code here",name:"bus_route",onChange:p,value:r.bus_route})]}),Object(c.jsx)("button",{type:"button",className:"clear__button",onClick:function(){return s(Object(j.a)(Object(j.a)({},r),{},{bus_route:""}))},children:"Clear"}),Object(c.jsx)("hr",{}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{style:{display:"block",fontWeight:"700"},children:"Advertisment for Bus route detail page"}),Object(c.jsx)("textarea",{rows:"6",style:{minWidth:"50%"},placeholder:"Paste the code here",name:"bus_route_detail",onChange:p,value:r.bus_route_detail})]}),Object(c.jsx)("button",{type:"button",className:"clear__button",onClick:function(){return s(Object(j.a)(Object(j.a)({},r),{},{bus_route_detail:""}))},children:"Clear"}),Object(c.jsx)("hr",{}),Object(c.jsx)("button",{type:"submit",style:{marginBottom:"15px",display:"block"},className:"route-add-edit__submit",children:"Save"})]})]})})}))),bn=(n(152),Object(l.b)((function(e){return{faqs:e.faqs.faqs,loading:e.faqs.loading}}))((function(e){var t=Object(a.useState)([]),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(!0),l=Object(b.a)(i,2),j=l[0],p=l[1],h=Object(u.g)();Object(a.useEffect)((function(){e.dispatch(S())}),[]),Object(a.useEffect)((function(){e.faqs?(s(e.faqs),p(e.loading)):p(!1)}),[e.faqs]);var O=function(t){e.dispatch(function(e){return function(){var t=Object(_.a)(g.a.mark((function t(n){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.delete("".concat(R,"/faq/").concat(e));case 3:c=t.sent,console.log(c),n({type:"DELETE_FAQ",payload:c.data}),d.b.success("FAQ was deleted"),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0),n({type:"DELETE_FAQ_ERROR"}),d.b.error("FAQ deleted error. Try again later.");case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(t));var n=r.filter((function(e){return e._id!==t}));s(n)};return Object(c.jsx)("div",{style:{flexGrow:"1",boxSizing:"border-box",width:"100%"},children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("h3",{children:"ADMIN"}),Object(c.jsx)(St,{}),Object(c.jsx)(o.b,{to:"/admin/faq_edit/new",className:"add_route--link",children:"Add FAQ"}),Object(c.jsx)("hr",{style:{marginTop:"15px"}}),j?Object(c.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"},children:Object(c.jsx)(oe.a,{})}):Object(c.jsxs)("table",{className:"admin__table",style:{marginTop:"20px"},children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Title FAQ"}),Object(c.jsx)("th",{children:"Description FAQ"}),Object(c.jsx)("th",{children:"Status"})]})}),Object(c.jsx)("tbody",{children:r.map((function(e){return Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{className:"users__form-email",style:{maxWidth:"30%"},children:e.title}),Object(c.jsx)("td",{className:"users__form-email",style:{maxWidth:"30%"},children:e.text}),Object(c.jsx)("td",{children:Object(c.jsxs)("div",{className:"users__form--btns",children:[Object(c.jsx)("button",{type:"button",onClick:function(){return h.push("/admin/faq_edit/".concat(e._id))},children:"Edit"}),Object(c.jsx)("button",{type:"button",onClick:function(){return O(e._id)},children:"Delete"})]})})]},e._id)}))})]})]})})}))),pn=Object(l.b)((function(e){return{currentFaq:e.faqs.currentFaq,loading:e.faqs.loading}}))((function(e){var t=Object(a.useState)({title:"",text:""}),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(!0),l=Object(b.a)(i,2),o=l[0],u=l[1];Object(a.useEffect)((function(){var t;"new"!==e.match.params.id&&e.dispatch((t=e.match.params.id,function(){var e=Object(_.a)(g.a.mark((function e(n){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("".concat(R,"/faq/").concat(t));case 3:c=e.sent,n({type:"GET_CURRENT_FAQ",payload:c.data}),e.next=12;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0),n({type:"GET_CURRENT_FAQ_ERROR"}),d.b.error("Error to get current faq from DB");case 12:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}),[]),Object(a.useEffect)((function(){return e.currentFaq._id?(s(e.currentFaq),u(e.loading)):u(!1),function(){s({title:"",text:""})}}),[e.currentFaq]);var p=function(e){return s(Object(j.a)(Object(j.a)({},r),{},Object(Dt.a)({},e.target.name,e.target.value)))};return Object(c.jsx)("div",{style:{flexGrow:"1",boxSizing:"border-box",width:"100%"},children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)(Et,{}),Object(c.jsx)("h4",{children:"New/Edit FAQ"}),Object(c.jsx)("hr",{}),o?Object(c.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"},children:Object(c.jsx)(oe.a,{})}):Object(c.jsxs)("form",{className:"route-add-edit__form",onSubmit:function(t){t.preventDefault(),"new"!==e.match.params.id?e.dispatch(function(e,t){return function(){var n=Object(_.a)(g.a.mark((function n(c){var a,r;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a={title:t.title,text:t.text},n.prev=1,n.next=4,E.a.put("".concat(R,"/faq/").concat(e),a);case 4:r=n.sent,c({type:"UPDATE_FAQ",payload:r.data}),d.b.success("FAQ was updated."),n.next=14;break;case 9:n.prev=9,n.t0=n.catch(1),console.log(n.t0),c({type:"UPDATE_FAQ_ERROR"}),d.b.error("FAQ updated error. Try again later.");case 14:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(e){return n.apply(this,arguments)}}()}(r._id,r)):e.dispatch(function(e){return function(){var t=Object(_.a)(g.a.mark((function t(n){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.post("".concat(R,"/faq"),e);case 3:c=t.sent,n({type:"ADD_FAQ",payload:c.data}),d.b.success("FAQ was added"),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),n({type:"ADD_FAQ_ERROR"}),d.b.error("Error to add FAQ to data base. Try again later");case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(r)),e.history.push("/admin/faq")},children:[Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{style:{fontWeight:"700"},children:"Title"}),Object(c.jsx)("input",{type:"text",name:"title",value:r.title,onChange:p,required:!0,style:{minWidth:"50%"},maxLength:50})]}),Object(c.jsx)("hr",{}),Object(c.jsxs)("label",{children:[Object(c.jsx)("span",{style:{fontWeight:"700"},children:"Description"}),Object(c.jsx)("textarea",{rows:"6",name:"text",value:r.text,onChange:p,required:!0,style:{minWidth:"50%",display:"block"},maxLength:450})]}),Object(c.jsx)("button",{type:"submit",className:"route-add-edit__submit",children:"Save"})]})]})})})),hn=(n(153),Object(l.b)((function(e){return{routes:e.routes.routes,loading:e.routes.loading}}))((function(e){var t,n=Object(a.useState)([]),r=Object(b.a)(n,2),s=r[0],i=r[1],l=Object(a.useState)(!0),u=Object(b.a)(l,2),d=u[0],j=u[1];return Object(a.useEffect)((function(){e.dispatch(ue())}),[]),Object(a.useEffect)((function(){if(e.routes){var t,n=e.routes.sort((function(e,t){return e.number<t.number?-1:Number(e.number>t.number)})),c=[];n.forEach((function(e){t!==e.number&&(c.push(e),t=e.number)})),i(c),j(e.loading)}else j(!1)}),[e.routes]),Object(c.jsx)("div",{style:{position:"relative",flexGrow:"1",boxSizing:"border-box",width:"100%"},children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)("h3",{children:"Bus Tracker"}),Object(c.jsx)(ae,{top:10}),Object(c.jsx)("div",{className:"landing__buttons",children:O()&&O()._id?null:Object(c.jsx)(o.b,{to:"/register_driver",style:{backgroundColor:"lightGrey"},children:"Drivers Login/Register Now"})}),d?Object(c.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"},children:Object(c.jsx)(oe.a,{})}):Object(c.jsx)("div",{className:"tracker__routes--links",children:s.map((function(e){var n;return t!==e.number?(n=Object(c.jsxs)("span",{children:[Object(c.jsx)("hr",{}),Object(c.jsxs)(o.b,{to:"/route_detail/".concat(e._id),children:["#",e.number," ",e.name]})]},e._id),t=e.number):n=Object(c.jsx)("span",{children:Object(c.jsxs)(o.b,{to:"/route_detail/".concat(e._id),children:["#",e.number," ",e.name]})},e._id),n}))})]})})}))),On=n(93);function fn(){return(fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}function xn(e,t){if(null==e)return{};var n,c,a=function(e,t){if(null==e)return{};var n,c,a={},r=Object.keys(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var mn=a.createElement("path",{d:"M232,406c-2.63,0-5.21,1.069-7.07,2.93S222,413.37,222,416s1.069,5.21,2.93,7.069c1.86,1.86,4.44,2.931,7.07,2.931 s5.21-1.07,7.069-2.931C240.93,421.21,242,418.63,242,416s-1.07-5.21-2.931-7.07C237.21,407.069,234.63,406,232,406z"}),vn=a.createElement("path",{d:"M232,445c-5.522,0-10,4.478-10,10v47c0,5.522,4.478,10,10,10s10-4.478,10-10v-47C242,449.478,237.522,445,232,445z"}),gn=a.createElement("path",{d:"M348,0H164c-31.981,0-58,26.019-58,58v244c0,31.981,26.019,58,58,58h58v17c0,5.522,4.478,10,10,10s10-4.478,10-10v-17h28 v142c0,5.522,4.478,10,10,10s10-4.478,10-10V360h58c31.981,0,58-26.019,58-58v-84c0-5.522-4.478-10-10-10s-10,4.478-10,10v84 c0,20.953-17.047,38-38,38H164c-20.953,0-38-17.047-38-38V58c0-20.953,17.047-38,38-38h184c20.953,0,38,17.047,38,38v85.726 c0,5.522,4.478,10,10,10s10-4.478,10-10V58C406,26.019,379.981,0,348,0z"}),_n=a.createElement("path",{d:"M396,173.069c-2.63,0-5.21,1.07-7.07,2.931c-1.86,1.859-2.93,4.439-2.93,7.069c0,2.631,1.069,5.211,2.93,7.07 c1.86,1.86,4.44,2.93,7.07,2.93c2.64,0,5.21-1.069,7.069-2.93c1.86-1.859,2.931-4.439,2.931-7.07c0-2.63-1.07-5.21-2.931-7.069 C401.21,174.14,398.63,173.069,396,173.069z"}),yn=a.createElement("path",{d:"M336.28,173.726H348c5.522,0,10-4.478,10-10V82.712C358,66.88,345.12,54,329.288,54H182.712C166.88,54,154,66.88,154,82.712 v81.014c0,5.522,4.478,10,10,10h11.387c4.128,11.639,15.244,20,28.28,20s24.152-8.361,28.28-20h47.773 c4.128,11.639,15.244,20,28.28,20S332.152,185.365,336.28,173.726z M336.28,153.726c-4.128-11.639-15.244-20-28.28-20 s-24.152,8.361-28.28,20h-47.773c-4.128-11.639-15.244-20-28.28-20s-24.152,8.361-28.28,20H174v-29.863h164v29.863H336.28z  M237.75,103.862V74h36.5v29.862H237.75z M338,82.712v21.15h-43.75V74h35.038C334.092,74,338,77.908,338,82.712z M182.712,74h35.038 v29.862H174v-21.15C174,77.908,177.908,74,182.712,74z M203.667,173.726c-5.514,0-10-4.486-10-10s4.486-10,10-10 c5.134,0,9.373,3.892,9.933,8.879c-0.042,0.368-0.067,0.742-0.067,1.121s0.025,0.753,0.067,1.121 C213.04,169.834,208.801,173.726,203.667,173.726z M298,163.726c0-5.514,4.486-10,10-10s10,4.486,10,10s-4.486,10-10,10 S298,169.239,298,163.726z"}),En=a.createElement("path",{d:"M188.353,219.921H164c-5.522,0-10,4.478-10,10v36v36c0,5.522,4.478,10,10,10h24.353c15.439,0,28-12.561,28-28 c0-6.849-2.476-13.129-6.575-18c4.099-4.871,6.575-11.151,6.575-18C216.353,232.481,203.792,219.921,188.353,219.921z M174,239.921 h14.353c4.411,0,8,3.589,8,8s-3.589,8-8,8H174V239.921z M188.353,291.921H174v-16h14.353c4.411,0,8,3.589,8,8 S192.764,291.921,188.353,291.921z"}),Rn=a.createElement("path",{d:"M237.1,219.921c-5.522,0-10,4.478-10,10v52c0,16.542,13.458,30,30,30s30-13.458,30-30v-52c0-5.522-4.478-10-10-10 s-10,4.478-10,10v52c0,5.514-4.486,10-10,10s-10-4.486-10-10v-52C247.1,224.398,242.622,219.921,237.1,219.921z"}),Sn=a.createElement("path",{d:"M331.177,291.921h-16.65c-5.522,0-10,4.478-10,10s4.478,10,10,10h16.65c15.439,0,28-12.561,28-28s-12.561-28-28-28h-6.354 c-4.411,0-8-3.589-8-8s3.589-8,8-8h12.653c5.522,0,10-4.478,10-10s-4.478-10-10-10h-12.653c-15.439,0-28,12.561-28,28 s12.561,28,28,28h6.354c4.411,0,8,3.589,8,8S335.588,291.921,331.177,291.921z"}),wn=a.createElement("g",null),Cn=a.createElement("g",null),kn=a.createElement("g",null),Tn=a.createElement("g",null),Nn=a.createElement("g",null),An=a.createElement("g",null),In=a.createElement("g",null),Dn=a.createElement("g",null),Fn=a.createElement("g",null),Un=a.createElement("g",null),Ln=a.createElement("g",null),Bn=a.createElement("g",null),Mn=a.createElement("g",null),Vn=a.createElement("g",null),Pn=a.createElement("g",null);function Gn(e,t){var n=e.title,c=e.titleId,r=xn(e,["title","titleId"]);return a.createElement("svg",fn({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t,"aria-labelledby":c},r),n?a.createElement("title",{id:c},n):null,a.createElement("polyline",{style:{fill:"#4DBAF6"},points:"232,502 232,350 280,350 280,502 "}),a.createElement("path",{style:{fill:"#FFC66C"},d:"M348,10H164c-26.51,0-48,21.49-48,48v244c0,26.51,21.49,48,48,48h184c26.51,0,48-21.49,48-48V58 C396,31.49,374.51,10,348,10z"}),a.createElement("g",null,a.createElement("path",{style:{fill:"#FFFFFF"},d:"M328,163.725h20V82.712C348,72.378,339.622,64,329.288,64H182.712C172.378,64,164,72.378,164,82.712 v81.014h19.667L328,163.725L328,163.725z"}),a.createElement("circle",{style:{fill:"#FFFFFF"},cx:203.67,cy:163.72,r:20}),a.createElement("circle",{style:{fill:"#FFFFFF"},cx:308,cy:163.72,r:20})),mn,vn,gn,_n,yn,En,Rn,Sn,wn,Cn,kn,Tn,Nn,An,In,Dn,Fn,Un,Ln,Bn,Mn,Vn,Pn)}var zn=a.forwardRef(Gn);n.p;function qn(){return(qn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}function Hn(e,t){if(null==e)return{};var n,c,a=function(e,t){if(null==e)return{};var n,c,a={},r=Object.keys(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Yn=a.createElement("g",null,a.createElement("path",{d:"m312.029 123.191h-118.943c-22.299.027-40.37 18.098-40.397 40.397v146.748c0 7.859 6.371 14.229 14.229 14.229 7.859 0 14.229-6.371 14.229-14.229v-120.182c0-4.365 3.539-7.904 7.904-7.904s7.904 3.539 7.904 7.904v287.583c.455 13.163 11.495 23.465 24.658 23.011 12.525-.433 22.578-10.486 23.011-23.011v-164.242c0-4.365 3.539-7.904 7.904-7.904s7.904 3.539 7.904 7.904v164.243c.455 13.163 11.495 23.465 24.658 23.011 12.525-.433 22.578-10.486 23.011-23.011v-287.584c0-4.365 3.539-7.904 7.904-7.904s7.904 3.539 7.904 7.904v120.181c0 7.859 6.371 14.229 14.229 14.229 7.859 0 14.229-6.371 14.229-14.229v-146.74c-.021-22.28-18.058-40.345-40.338-40.404z"}),a.createElement("path",{d:"m284.303 505.136c-15.125-.016-27.383-12.273-27.399-27.399v-164.242c0-2.403-1.948-4.351-4.351-4.351s-4.351 1.948-4.351 4.351v164.243c-.345 15.128-12.888 27.112-28.016 26.767-14.643-.334-26.434-12.125-26.767-26.767v-287.584c0-2.401-1.946-4.347-4.347-4.347s-4.347 1.946-4.347 4.347v120.181c0 9.823-7.963 17.787-17.787 17.787s-17.787-7.963-17.787-17.787v-146.74c.027-24.264 19.691-43.927 43.955-43.955h118.922c24.264.027 43.927 19.691 43.955 43.955v146.741c0 9.823-7.963 17.787-17.787 17.787s-17.787-7.963-17.787-17.787v-120.182c0-2.401-1.946-4.347-4.347-4.347s-4.347 1.946-4.347 4.347v287.583c-.018 15.13-12.282 27.387-27.412 27.399zm-31.746-203.103c6.327.008 11.454 5.135 11.462 11.462v164.243c.297 11.199 9.615 20.036 20.814 19.74 10.781-.286 19.454-8.958 19.74-19.74v-287.584c0-6.33 5.132-11.462 11.462-11.462s11.462 5.132 11.462 11.462v120.181c0 5.894 4.778 10.672 10.672 10.672s10.672-4.778 10.672-10.672v-146.74c-.024-20.336-16.504-36.816-36.84-36.84h-118.915c-20.336.024-36.816 16.504-36.84 36.84v146.741c0 5.894 4.778 10.672 10.672 10.672s10.672-4.778 10.672-10.672v-120.182c0-6.33 5.132-11.462 11.462-11.462s11.462 5.132 11.462 11.462v287.583c.297 11.199 9.615 20.036 20.814 19.74 10.781-.286 19.454-8.958 19.74-19.74v-164.242c.007-6.338 5.151-11.47 11.489-11.462z"}),a.createElement("circle",{cx:252.557,cy:49.902,r:46.352}),a.createElement("path",{d:"m252.557 99.819c-27.564 0-49.91-22.345-49.91-49.91 0-27.564 22.345-49.91 49.91-49.91 27.562 0 49.906 22.341 49.91 49.902-.027 27.556-22.355 49.887-49.91 49.918zm0-92.711c-23.635 0-42.795 19.16-42.795 42.795s19.16 42.795 42.795 42.795 42.795-19.16 42.795-42.795c-.027-23.624-19.171-42.768-42.795-42.795z"}));function Wn(e,t){var n=e.title,c=e.titleId,r=Hn(e,["title","titleId"]);return a.createElement("svg",qn({id:"Capa_1",enableBackground:"new 0 0 505.136 505.136",height:512,viewBox:"0 0 505.136 505.136",width:512,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},r),n?a.createElement("title",{id:c},n):null,Yn)}var Qn=a.forwardRef(Wn);n.p;function Xn(){return(Xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(e[c]=n[c])}return e}).apply(this,arguments)}function Jn(e,t){if(null==e)return{};var n,c,a=function(e,t){if(null==e)return{};var n,c,a={},r=Object.keys(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(c=0;c<r.length;c++)n=r[c],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Kn=a.createElement("path",{d:"m496.449219 90.339844h-9.457031c-.269532-14.960938-12.515626-27.050782-27.539063-27.050782h-22.886719v-35.734374c0-15.191407-12.363281-27.554688-27.554687-27.554688h-306.023438c-15.195312 0-27.554687 12.363281-27.554687 27.554688v35.734374h-22.886719c-15.023437 0-27.269531 12.089844-27.539063 27.050782h-9.457031c-8.574219 0-15.550781 6.976562-15.550781 15.550781v80.109375c0 8.574219 6.976562 15.550781 15.550781 15.550781h33.917969c8.574219 0 15.550781-6.976562 15.550781-15.550781v-80.109375c0-8.574219-6.976562-15.550781-15.550781-15.550781h-9.417969c.265625-6.671875 5.761719-12.023438 12.496094-12.023438h22.886719v278.792969c0 4.152344 3.363281 7.515625 7.515625 7.515625 4.148437 0 7.515625-3.363281 7.515625-7.515625v-61.972656c3.757812 1.929687 8.015625 3.023437 12.523437 3.023437h306.023438c4.507812 0 8.765625-1.09375 12.523437-3.023437v121.324219c0 6.90625-5.617187 12.523437-12.523437 12.523437h-306.023438c-6.90625 0-12.523437-5.617187-12.523437-12.523437v-24.617188c0-4.148438-3.367188-7.515625-7.515625-7.515625-4.152344 0-7.515625 3.367187-7.515625 7.515625v24.617188c0 15.191406 12.359375 27.550781 27.554687 27.550781h7.816407v17.46875c0 11.601562 9.4375 21.042969 21.042968 21.042969h33.78125c11.601563 0 21.039063-9.441407 21.039063-21.042969v-17.46875h138.664062v17.46875c0 11.601562 9.4375 21.042969 21.039063 21.042969h33.78125c11.605468 0 21.042968-9.441407 21.042968-21.042969v-17.46875h7.816407c15.195312 0 27.554687-12.359375 27.554687-27.550781v-338.144532h22.886719c6.734375 0 12.230469 5.351563 12.5 12.023438h-9.417969c-8.574218 0-15.554687 6.976562-15.554687 15.550781v80.109375c0 8.574219 6.980469 15.550781 15.554687 15.550781h33.914063c8.574219 0 15.550781-6.976562 15.550781-15.550781v-80.109375c0-8.574219-6.976562-15.550781-15.550781-15.550781zm-446.980469 15.027344c.289062 0 .519531.234374.519531.523437v80.109375c0 .289062-.234375.523438-.519531.523438h-33.917969c-.289062 0-.523437-.234376-.523437-.523438v-80.109375c0-.289063.234375-.523437.523437-.523437zm122.171875 356.113281c0 3.3125-2.699219 6.011719-6.011719 6.011719h-33.78125c-3.316406 0-6.011718-2.699219-6.011718-6.011719v-17.46875h45.800781v17.46875zm214.523437 0c0 3.3125-2.695312 6.011719-6.011718 6.011719h-33.78125c-3.3125 0-6.011719-2.699219-6.011719-6.011719v-17.46875h45.804687zm35.371094-371.726563h-303.472656c-4.148438 0-7.511719 3.363282-7.511719 7.515625 0 4.148438 3.363281 7.515625 7.511719 7.515625h303.476562v142.351563h-49.644531c-4.152343 0-7.515625 3.363281-7.515625 7.515625s3.363282 7.515625 7.515625 7.515625h49.644531v8.441406c0 6.902344-5.617187 12.523437-12.523437 12.523437h-306.027344c-6.90625 0-12.523437-5.621093-12.523437-12.523437v-8.441406h246.359375c4.152343 0 7.515625-3.363281 7.515625-7.515625s-3.363282-7.515625-7.515625-7.515625h-73.910157l70.898438-59.265625c3.175781-2.65625 3.597656-7.386719.941406-10.566406-2.65625-3.175782-7.386718-3.601563-10.5625-.941407l-84.664062 70.773438h-32.269532l70.894532-59.265625c3.179687-2.65625 3.601562-7.386719.945312-10.5625-2.65625-3.179688-7.386718-3.605469-10.566406-.945313l-84.660156 70.777344h-93.40625v-181.433594h331.070312zm0-39.078125h-331.070312v-23.121093c0-6.90625 5.617187-12.523438 12.523437-12.523438h306.023438c6.90625 0 12.523437 5.617188 12.523437 12.523438zm75.4375 135.324219c0 .289062-.234375.523438-.523437.523438h-33.914063c-.289062 0-.523437-.234376-.523437-.523438v-80.109375c0-.289063.234375-.523437.523437-.523437h33.914063c.289062 0 .523437.234374.523437.523437zm0 0"}),Zn=a.createElement("path",{d:"m185.613281 377.316406c6.90625 0 12.523438-5.621094 12.523438-12.527344v-12.023437c0-16.296875-13.257813-29.554687-29.558594-29.554687h-46.089844c-6.90625 0-12.523437 5.617187-12.523437 12.523437v12.023437c0 16.296876 13.257812 29.558594 29.558594 29.558594zm-60.621093-29.558594v-9.519531h43.585937c8.011719 0 14.527344 6.519531 14.527344 14.527344v9.519531h-43.582031c-8.011719 0-14.53125-6.519531-14.53125-14.527344zm0 0"}),$n=a.createElement("path",{d:"m372.476562 377.316406c16.300782 0 29.558594-13.261718 29.558594-29.558594v-12.023437c0-6.90625-5.617187-12.523437-12.523437-12.523437h-46.089844c-16.296875 0-29.558594 13.257812-29.558594 29.554687v12.023437c0 6.90625 5.617188 12.527344 12.523438 12.527344zm-43.585937-24.550781c0-8.011719 6.519531-14.527344 14.53125-14.527344h43.582031v9.519531c0 8.011719-6.515625 14.527344-14.527344 14.527344h-43.585937zm0 0"}),ec=a.createElement("path",{d:"m289.171875 417.726562c5.308594 0 9.625-4.316406 9.625-9.625v-19.824218c0-5.308594-4.316406-9.625-9.625-9.625h-66.34375c-5.308594 0-9.625 4.316406-9.625 9.625v19.824218c0 5.308594 4.316406 9.625 9.625 9.625zm-60.941406-24.046874h55.539062v9.019531h-55.539062zm0 0"});function tc(e,t){var n=e.title,c=e.titleId,r=Jn(e,["title","titleId"]);return a.createElement("svg",Xn({height:"512pt",viewBox:"0 -15 512.001 512",width:"512pt",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":c},r),n?a.createElement("title",{id:c},n):null,Kn,Zn,$n,ec)}var nc=a.forwardRef(tc),cc=(n.p,function(e){var t=e.route,n=e.toggleModal,r=e.toggleAddModal,s=e.setStateAlert,i=e.deleteAlert,l=Object(a.useState)({}),o=Object(b.a)(l,2),u=o[0],d=o[1];Object(a.useEffect)((function(){d(t)}),[]);return Object(c.jsx)("div",{className:"alert__modal--container",children:Object(c.jsx)("div",{className:"alert__modal",children:u?Object(c.jsxs)(a.Fragment,{children:[Object(c.jsxs)("h4",{style:{marginBottom:"0"},children:[t.number," ",t.name]}),!O()&&Object(c.jsx)("div",{style:{color:"red"},children:"Please Log in for add, set or remove alert(s)"}),Object(c.jsx)("i",{children:"Alert impacting you travel"}),O()&&Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{type:"button",className:"add_alert_button",onClick:function(e){e.preventDefault(),n(),r()},children:"Add alert"}),Object(c.jsx)("span",{children:" (see something, Say something)"})]}),t.alerts.length>0&&Object(c.jsx)("hr",{}),u.alerts&&t.alerts.length>0&&u.alerts.map((function(e,t){return Object(c.jsxs)("div",{children:[Object(c.jsxs)("div",{className:"alert__info",children:[Object(c.jsxs)("span",{children:[At()(e.date).format("ddd MMM DD")," - ",e.event_alert]}),O()&&Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{type:"button",style:{backgroundColor:"green",color:"white"},onClick:function(){return function(e,t){var n=u.alerts.map((function(n){return n._id===e?Object(j.a)(Object(j.a)({},n),{},{date:t}):n}));d(Object(j.a)(Object(j.a)({},u),{},{alerts:n})),s(e,t)}(e._id,new Date)},children:"Still active"}),Object(c.jsx)("button",{type:"button",style:{backgroundColor:e.is_active_alert?"":"green",color:e.is_active_alert?"":"white"},onClick:function(){return function(e){var t=u.alerts.filter((function(t){return t._id!==e}));d(Object(j.a)(Object(j.a)({},u),{},{alerts:t})),i(e)}(e._id)},children:"Cleared"})]})]}),Object(c.jsx)("hr",{})]},e._id)})),Object(c.jsx)("button",{className:"alert__close",onClick:n,children:"X"})]}):Object(c.jsx)(oe.a,{})})})}),ac=(n(155),n(94)),rc=n.n(ac),sc=(n(156),function(e){var t=e.route,n=e.toggleAddModal,r=e.addAlert,s=Object(a.useState)(new Date),i=Object(b.a)(s,2),l=i[0],o=i[1],u=Object(a.useState)(),d=Object(b.a)(u,2),j=d[0],p=d[1],h=function(e){p(e.target.value)},O=function(e){var t=e.value,n=e.onClick;return Object(c.jsx)("button",{className:"date__picker",onClick:n,children:t})};return Object(c.jsx)("div",{className:"alert__modal--container",children:Object(c.jsxs)("div",{className:"alert__modal",children:[Object(c.jsxs)("h4",{children:["New Alert on ",t.number," ",t.name]}),Object(c.jsx)("hr",{}),Object(c.jsx)(rc.a,{selected:l,onChange:function(e){return o(e)},minDate:new Date,showTimeInput:!0,dateFormat:"yyyy/MM/dd h:mm aa",calendarClassName:"calendar__custom",customInput:Object(c.jsx)(O,{}),popperModifiers:{offset:{enabled:!0,offset:"5px, 5px"},preventOverflow:{enabled:!0,escapeWithReference:!1,boundariesElement:"viewport"}}}),Object(c.jsxs)("form",{style:{marginTop:"15px"},onSubmit:function(e){e.preventDefault();var c={date:l,event_alert:j,is_active_alert:!0};r(t._id,c),n()},children:[Object(c.jsxs)("label",{className:"alert__add--label",children:[Object(c.jsx)("input",{type:"radio",name:"event_alert",value:"accident",onChange:h}),Object(c.jsx)("span",{children:"Accident"})]}),Object(c.jsx)("br",{}),Object(c.jsxs)("label",{className:"alert__add--label",children:[Object(c.jsx)("input",{type:"radio",name:"event_alert",value:"bridge_opening",onChange:h}),Object(c.jsx)("span",{children:"Bridge opening"})]}),Object(c.jsx)("br",{}),Object(c.jsxs)("label",{className:"alert__add--label",children:[Object(c.jsx)("input",{type:"radio",name:"event_alert",value:"protest",onChange:h}),Object(c.jsx)("span",{children:"Protest"})]}),Object(c.jsx)("br",{}),Object(c.jsxs)("label",{className:"alert__add--label",children:[Object(c.jsx)("input",{type:"radio",name:"event_alert",value:"fire",onChange:h}),Object(c.jsx)("span",{children:"Fire"})]}),Object(c.jsx)("br",{}),Object(c.jsxs)("label",{className:"alert__add--label",children:[Object(c.jsx)("input",{type:"radio",name:"event_alert",value:"police_activity",onChange:h}),Object(c.jsx)("span",{children:"Police activity"})]}),Object(c.jsx)("br",{}),Object(c.jsxs)("label",{className:"alert__add--label",children:[Object(c.jsx)("input",{type:"radio",name:"event_alert",value:"traffic",onChange:h}),Object(c.jsx)("span",{children:"Traffic"})]}),Object(c.jsx)("br",{}),Object(c.jsxs)("label",{className:"alert__add--label",children:[Object(c.jsx)("input",{type:"radio",name:"event_alert",value:"other",onChange:h}),Object(c.jsx)("span",{children:"Other"})]}),Object(c.jsx)("button",{type:"submit",style:{marginBottom:"15px",display:"block"},className:"route-add-edit__submit",children:"Submit"})]}),Object(c.jsx)("button",{className:"alert__close",onClick:n,children:"X"})]})})}),ic=Object(l.b)()((function(e){var t=e.route,n=e.stop,r=e.stops,s=e.toggleBusStop,i=e.idx,l=Object(a.useState)([]),o=Object(b.a)(l,2),u=o[0],d=o[1];Object(a.useEffect)((function(){var e=r.slice(0,i),t=[];e.forEach((function(n,c){n.vehicles.length>0&&n.vehicles.forEach((function(n){var a=0,r=n.average_speed.length>1?n.average_speed.reduce((function(e,t){return+e+ +t})).toFixed(3)/n.average_speed.length:n.average_speed[0];if(r=""===r?0:r,"approaching"===n.text||"just left"===n.text||"at stop"===n.text){var s=e.slice(c),i=(a=(s=s.filter((function(e){return"between"===e.name_of_stop}))).length>1?s.reduce((function(e,t){return+e+ +t.distance}),+a):s[0].distance)/r*60*60,l=At.a.unix(i).utc().format("H [hours,] m [minutes and] s [seconds]");t=[].concat(Object(ge.a)(t),[{distance:a,time:l}])}else{var o=e.slice(c+1),u=(a=(o=o.filter((function(e){return"between"===e.name_of_stop}))).length>1?o.reduce((function(e,t){return e+ +t.distance}),+n.distance):1===o.length?+o[0].distance+ +n.distance:+n.distance)/r*60*60,d=At.a.unix(u).utc().format("H [hours,] m [minutes and] s [seconds]");t=[].concat(Object(ge.a)(t),[{distance:a,time:d}])}}))})),r[i].vehicles.length>0&&r[i].vehicles.filter((function(e){return"just left"!==e.text})).forEach((function(e){t=[].concat(Object(ge.a)(t),[{distance:0,time:e.text}])})),t=t.sort((function(e,t){return e.distance<t.distance?-1:Number(e.distance>t.distance)})),d(t)}),[]);return Object(c.jsx)("div",{className:"alert__modal--container",children:Object(c.jsx)("div",{className:"alert__modal",children:Object(c.jsxs)("div",{style:{position:"relative",width:"100%",height:"100%"},children:[Object(c.jsxs)("h3",{children:["#",t.number," ",t.name]}),Object(c.jsx)("h4",{style:{fontSize:"20px",color:"lightcoral",marginTop:"-10px"},children:n.name_of_stop}),u.length>0?Object(c.jsx)("ul",{style:{paddingLeft:"20px"},children:u.map((function(e,t){return Object(c.jsxs)("span",{children:[Object(c.jsx)("li",{children:0===e.distance?Object(c.jsx)("span",{children:e.time}):Object(c.jsxs)("span",{children:[(n=e.distance,1e3*n<100?"".concat(Math.round(1e3*n)," m"):"".concat(n.toFixed(2)," km"))," away.",Object(c.jsx)("br",{})," ",Object(c.jsx)("strong",{children:"Estimated time:"})," ","Invalid date"!==e.time?e.time:"Undefined. Vehicle speed is 0"]})}),Object(c.jsx)("hr",{style:{marginLeft:"-20px"}})]},t);var n}))}):Object(c.jsx)("span",{children:"No bus detected at this time."}),Object(c.jsx)("button",{type:"button",className:"close__button--cross",onClick:s,children:"X"})]})})})})),lc=Object(l.b)((function(e){return{currentRoute:e.routes.currentRoute,vehiclesByRoute:e.vehicles.vehiclesByRoute,routes:e.routes.routes,user:e.user.user,loading:e.routes.loading}}))((function(e){var t=Object(a.useState)({}),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)({}),l=Object(b.a)(i,2),u=l[0],p=l[1],h=Object(a.useState)([]),f=Object(b.a)(h,2),m=f[0],v=f[1],y=Object(a.useState)([]),S=Object(b.a)(y,2),w=S[0],C=S[1],k=Object(a.useState)([]),T=Object(b.a)(k,2),N=T[0],A=T[1],I=Object(a.useState)(!0),D=Object(b.a)(I,2),F=D[0],U=D[1],L=Object(a.useState)(!1),B=Object(b.a)(L,2),M=B[0],V=B[1],P=Object(a.useState)(!1),G=Object(b.a)(P,2),z=G[0],q=G[1],H=Object(a.useState)(),Y=Object(b.a)(H,2),W=Y[0],Q=Y[1],X=Object(a.useState)(),J=Object(b.a)(X,2),K=J[0],Z=J[1],$=Object(a.useState)(),ee=Object(b.a)($,2),te=ee[0],ne=ee[1],ce=Object(a.useState)(),re=Object(b.a)(ce,2),se=re[0],ie=re[1],le=Object(a.useState)(!1),de=Object(b.a)(le,2),je=de[0],be=de[1],pe=Object(a.useState)(),he=Object(b.a)(pe,2),Oe=he[0],fe=he[1],xe=Object(a.useState)(),me=Object(b.a)(xe,2),ve=me[0],ye=me[1];Object(a.useEffect)((function(){e.dispatch(ue())}),[]),Object(a.useEffect)((function(){var t;return e.dispatch((t=e.match.params.routeId,function(){var e=Object(_.a)(g.a.mark((function e(n){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.get("".concat(R,"/routes/").concat(t));case 3:return c=e.sent,n({type:"GET_ROUTES_BY_NUMBER",payload:c.data}),e.abrupt("return",c.data);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),n({type:"GET_ROUTES_BY_NUMBER_ERROR"}),d.b.error("Error. Can't find current route in DB");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())).then((function(){Ee()})),function(){s({}),A([]),C([]),v([]),e.dispatch({type:"CLEAR_VEHICLES_BY_NUMBER"}),e.dispatch({type:"CLEAR_CURRENT_ROUTE"})}}),[e.match.params.routeId]),Object(a.useEffect)((function(){if(e.currentRoute){s(e.currentRoute);var t=e.routes.filter((function(t){return t.number===e.currentRoute.number&&t.name!==e.currentRoute.name}))[0];p(t),U(e.loading)}}),[e.currentRoute]),Object(a.useEffect)((function(){r&&(v(we(r)),C(we(r)))}),[r]),Object(a.useEffect)((function(){r&&A(e.vehiclesByRoute)}),[e.vehiclesByRoute]),Object(a.useEffect)((function(){m.length&&N.length&&Se(N,m)}),[N]),Object(a.useEffect)((function(){e.user&&e.user.isActive&&(Z(e.user.latitude),ne(e.user.longitude))}),[]),Object(a.useEffect)((function(){return Re.start(),function(){return Re.stop()}}),[]);var Ee=Object(a.useCallback)((function(){var t;r.name&&e.dispatch((t=r.name,function(){var e=Object(_.a)(g.a.mark((function e(n){var c,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={route:t},e.prev=1,e.next=4,E.a.post("".concat(R,"/vehicles/service"),c);case 4:return a=e.sent,n({type:"GET_VEHICLES_BY_NUMBER",payload:a.data}),e.abrupt("return",a.data);case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()))})),Re=Object(On.useInterval)(Ee,5e3),Se=function(e,t){var n,c=t;e.length>0&&e.forEach((function(e){var a=[];t.forEach((function(t,n){a=[].concat(Object(ge.a)(a),[{idx:n,name_of_stop:t.name_of_stop,distance:"between"!==t.name_of_stop?x(e.latitude,e.longitude,t.latitude,t.longitude):x(m[n-1].latitude,m[n-1].longitude,m[n+1].latitude,m[n+1].longitude)}])}));var r=Object(ge.a)(a).filter((function(e){return"between"!==e.name_of_stop})).sort((function(e,t){return e.distance<t.distance?-1:Number(e.distance>t.distance)}))[0];c=r.distance<.01?c.map((function(t,n){if(n===r.idx){var c=t.vehicles,a={text:"at stop",distance:0,average_speed:e.average_speed};return c=c.length>0?[].concat(Object(ge.a)(c),[a]):[a],Object(j.a)(Object(j.a)({},t),{},{vehicles:c})}return t})):0===r.idx?c.map((function(t,n){if(1===n){var c=t.vehicles,s={text:"",distance:(a[n+1].distance-r.distance).toFixed(2),average_speed:e.average_speed};return c=c.length>0?[].concat(Object(ge.a)(c),[s]):[s],Object(j.a)(Object(j.a)({},t),{},{vehicles:c})}return t})):r.distance>=.01&&r.distance<.032&&a[r.idx-2].distance<a[r.idx-1].distance?c.map((function(t,n){if(n===r.idx){var c=t.vehicles,a={text:"approaching",distance:0,average_speed:e.average_speed};return c=c.length>0?[].concat(Object(ge.a)(c),[a]):[a],Object(j.a)(Object(j.a)({},t),{},{vehicles:c})}return t})):r.distance>=.01&&r.distance<.032&&a[r.idx-2].distance>a[r.idx-1].distance?c.map((function(t,n){if(n===r.idx){var c=t.vehicles,a={text:"just left",distance:0,average_speed:e.average_speed};return c=c.length>0?[].concat(Object(ge.a)(c),[a]):[a],Object(j.a)(Object(j.a)({},t),{},{vehicles:c})}return t})):r.distance>=.032&&a[r.idx-2].distance<a[r.idx-1].distance?c.map((function(t,n){if(n===r.idx-1){var c=t.vehicles,a={text:"",distance:r.distance.toFixed(2),average_speed:e.average_speed};return c=c.length>0?[].concat(Object(ge.a)(c),[a]):[a],Object(j.a)(Object(j.a)({},t),{},{vehicles:c})}return t})):c.map((function(t,n){if(n===r.idx+1){var c=t.vehicles,s={text:"",distance:(a[r.idx+1].distance-a[r.idx].distance).toFixed(2),average_speed:e.average_speed};return c=c.length>0?[].concat(Object(ge.a)(c),[s]):[s],Object(j.a)(Object(j.a)({},t),{},{vehicles:c})}return t})),n=a})),c=c.map((function(e,t){return"between"===e.name_of_stop?Object(j.a)(Object(j.a)({},e),{},{distance:n[t].distance}):e})),C(c)},we=function(e){var t=[];return e.stops&&e.stops.forEach((function(n,c){t.push(Object(j.a)(Object(j.a)({},n),{},{vehicles:[]})),c!==e.stops.length-1&&t.push({name_of_stop:"between",vehicles:[]})})),t},Ce=function(e){e&&Q(e),V(!M)},ke=function(){q(!z)},Te=function(t){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(n){e.dispatch(function(e){return function(){var t=Object(_.a)(g.a.mark((function t(n){var c,a;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={latitude:e.latitude,longitude:e.longitude},t.prev=1,t.next=4,E.a.put("".concat(R,"/user/location/").concat(O()._id),c);case 4:a=t.sent,n({type:"SET_USER_LOCATION",payload:a.data}),d.b.success("Your position for the bus stop was setting successfully"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(1),n({type:"SET_USER_LOCATION_ERROR"}),d.b.error("Error set your position in DB");case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()}(n.coords)).then((function(){return Ne(t)}))}),(function(){return d.b.error("Unable to retrieve your location")})):d.b.error("Geolocation is not supported by your browser")},Ne=function(e){var t=[];e.stops.forEach((function(e,n){t=[].concat(Object(ge.a)(t),[{idx:n,name_of_stop:e.name_of_stop,distance:x(K,te,e.latitude,e.longitude).toFixed(2)}])}));var n=t.sort((function(e,t){return e.distance<t.distance?-1:Number(e.distance>t.distance)}))[0];ie(n)},Ae=function(){return be(!je)};return Object(c.jsxs)("div",{style:{position:"relative",flexGrow:"1",boxSizing:"border-box",width:"100%"},children:[M&&Object(c.jsx)(cc,{route:W,toggleModal:Ce,toggleAddModal:ke,setStateAlert:function(t,n){var c,a;e.dispatch((c=t,a=n,function(){var e=Object(_.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.put("".concat(R,"/routes/setStateAlert"),{alertId:c,date:a});case 3:n=e.sent,t({type:"SET_STATE_ALERT",payload:n.data}),d.b.success("Alert date was updated"),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),t({type:"SET_STATE_ALERT_ERROR"}),d.b.error("Error alert changes");case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()))},deleteAlert:function(t){return e.dispatch((n=t,function(){var e=Object(_.a)(g.a.mark((function e(t){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.delete("".concat(R,"/routes/deleteAlert/").concat(n));case 3:c=e.sent,t({type:"DELETE_ALERT",payload:c.data}),d.b.success("Alert was deleted"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),d.b.error("Error alert deletes");case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()));var n}}),je&&Object(c.jsx)(ic,{route:r,toggleBusStop:Ae,idx:ve,stops:w,stop:Oe}),z&&Object(c.jsx)(sc,{route:W,toggleAddModal:ke,addAlert:function(t,n){e.dispatch(function(e,t){return function(){var n=Object(_.a)(g.a.mark((function n(c){var a;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,E.a.put("".concat(R,"/routes/addAlert"),{routeId:e,alert:t});case 3:a=n.sent,c({type:"ADD_ALERT",payload:a.data}),d.b.success("Alert was added"),n.next=13;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0),c({type:"ADD_ALERT_ERROR"}),d.b.error("Error alert added.");case 13:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}(t,n))}}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)(Et,{}),Object(c.jsx)(ae,{}),!F&&r&&m.length?Object(c.jsxs)(a.Fragment,{children:[Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{className:"tracker__routes--links",children:[Object(c.jsxs)(o.b,{to:"#",children:["#",r.number," ",r.name]}),u&&u._id&&Object(c.jsxs)(o.b,{to:"/route_detail/".concat(u._id),children:["#",u.number," ",u.name]})]}),Object(c.jsx)("hr",{}),r&&Object(c.jsxs)("h3",{style:{textAlign:"center",marginTop:"0"},children:["#",r.number," ",r.name]}),Object(c.jsx)("div",{style:{textAlign:"center",margin:"-15px 0 20px"},children:Object(c.jsxs)("button",{className:"view-alert_button",onClick:function(){return Ce(r)},children:["View ",r.alerts?r.alerts.length:0," alert(s)",O()&&" / Add alert"]})}),Object(c.jsx)("hr",{}),O()&&Object(c.jsxs)("div",{children:[Object(c.jsx)("button",{className:"set__location",style:{margin:"15px 0"},onClick:function(){return Te(r)},children:"Get Your location"}),se&&Object(c.jsxs)("span",{style:{display:"block",fontWeight:"700"},children:["Nearest Bus stop is ",se.name_of_stop,". Distance is ",se.distance," km"]}),Object(c.jsx)("hr",{})]}),Object(c.jsxs)("div",{children:[w&&w.map((function(e,t){return Object(c.jsx)("div",{children:"between"!==e.name_of_stop?Object(c.jsxs)("div",{className:"stop__block",children:[Object(c.jsx)(zn,{className:"stop__block--svg"}),Object(c.jsx)("button",{className:"stop__block--button",onClick:function(){return function(e,t){fe(e),ye(t),Ae()}(e,t)},children:e.name_of_stop}),se&&e.name_of_stop===se.name_of_stop&&Object(c.jsxs)("span",{style:{display:"flex",alignItems:"center",marginLeft:"10px"},children:[Object(c.jsx)(Qn,{style:{height:"24px",width:"20px"}})," You (",se.distance,"km)"]}),e.vehicles.length>0&&e.vehicles.map((function(e){return Object(c.jsxs)("span",{style:{display:"flex",alignItems:"center",margin:"0 10px"},children:[Object(c.jsx)(nc,{style:{height:"24px",width:"20px",marginRight:"5px"}})," ",e.text]},Object(_e.a)())})),e.vehicles.length>0&&"(X".concat(e.vehicles.length,")")]}):Object(c.jsxs)("div",{className:"between_stops",children:[Object(c.jsx)("span",{className:"between_stops--inner",children:e.vehicles.length>0&&e.vehicles.map((function(e){return Object(c.jsxs)("span",{style:{display:"flex",alignItems:"center",margin:"0 10px 0"},children:[Object(c.jsx)(nc,{style:{height:"24px",width:"20px",marginRight:"5px"}})," ",e.text]},Object(_e.a)())}))}),e.vehicles.length>0&&"(X".concat(e.vehicles.length,")")]})},t)})),Object(c.jsx)(o.b,{to:"/route_explained/".concat(r._id),className:"explained__link",children:"Route explained"})]}),Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{className:"tracker__routes--links",children:[Object(c.jsxs)(o.b,{to:"#",children:["#",r.number," ",r.name]}),u&&u._id&&Object(c.jsxs)(o.b,{to:"/route_detail/".concat(u._id),children:["#",u.number," ",u.name]})]})]}):Object(c.jsx)("div",{className:"loading",children:Object(c.jsx)(oe.a,{})})]})]})})),oc=Object(l.b)((function(e){return{currentRoute:e.routes.currentRoute,loading:e.routes.loading}}))((function(e){var t=Object(a.useState)(),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(!0),l=Object(b.a)(i,2),o=l[0],u=l[1],d=Object(a.useState)(!1),j=Object(b.a)(d,2),p=j[0],h=j[1],O=Object(a.useState)(!1),f=Object(b.a)(O,2);f[0],f[1];Object(a.useEffect)((function(){e.currentRoute&&(s(e.currentRoute),u(e.loading))}),[]);var x;return Object(c.jsx)("div",{style:{position:"relative",flexGrow:"1",boxSizing:"border-box",width:"100%"},children:Object(c.jsxs)("div",{className:"container",children:[Object(c.jsx)(Et,{}),Object(c.jsx)("hr",{}),Object(c.jsx)("h3",{children:"BUS ROUTES/LINES EXPLAINED"}),Object(c.jsx)("hr",{}),o||!r?Object(c.jsx)("div",{className:"loading",children:Object(c.jsx)(oe.a,{})}):Object(c.jsxs)("div",{children:[Object(c.jsxs)("section",{children:[Object(c.jsx)("span",{style:{fontWeight:"700"},children:"Introduction text about route."}),Object(c.jsx)("p",{children:r.about}),Object(c.jsx)("hr",{})]}),Object(c.jsxs)("section",{children:[(x=r,Object(c.jsxs)(a.Fragment,{children:[Object(c.jsxs)("h4",{style:{display:"flex",alignItems:"center"},children:[Object(c.jsx)("span",{style:{color:"white",backgroundColor:"red",borderRadius:"50%",width:"35px",height:"35px",display:"flex",alignItems:"center",justifyContent:"center"},children:x.number}),Object(c.jsx)("span",{style:{marginLeft:"5px",fontSize:"18px"},children:x.name})]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("strong",{children:"Fare:"})," up to ",x.fare?x.fare:""]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("strong",{children:"Average travel time:"}),x.average_travel_time&&x.average_travel_time]}),Object(c.jsxs)("div",{children:[Object(c.jsx)("strong",{children:"Rush hour:"}),x.rush_hour&&x.rush_hour]}),Object(c.jsx)("strong",{children:"About this route:"})]})),p?function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)("strong",{style:{display:"block"},children:"Image of last stop:"}),Object(c.jsx)("img",{className:"image__stop",src:e.image_last_stop?e.image_last_stop:"",alt:"image_last_stop"}),Object(c.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(c.jsx)("strong",{style:{marginRight:"5px"},children:"Name of last stop:"}),Object(c.jsx)("span",{style:{margin:"5px 0",color:"green",fontWeight:"700",fontSize:"18px"},children:e.stops[e.stops.length-1].name_of_stop})]}),Object(c.jsx)("strong",{style:{display:"block"},children:"Image of first stop:"}),Object(c.jsx)("img",{className:"image__stop",src:e.image_first_stop?e.image_first_stop:"",alt:"image_first_stop"}),Object(c.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(c.jsx)("strong",{style:{marginRight:"5px"},children:"Name of first stop:"}),Object(c.jsx)("span",{style:{margin:"5px 0",color:"green",fontWeight:"700",fontSize:"18px"},children:e.stops[0].name_of_stop})]}),Object(c.jsx)("div",{children:Object(c.jsx)("strong",{children:"Fares for route:"})})]})}(r):Object(c.jsx)("span",{style:{display:"block",color:"blue",cursor:"pointer"},onClick:function(){return h(!0)},children:"More"})]})]})]})})})),uc=(n(214),Object(l.b)((function(e){return{routes:e.routes.routes,vehicles:e.vehicles.vehicles,loading:e.routes.loading}}))((function(e){var t=Object(a.useState)(),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(),l=Object(b.a)(i,2),o=l[0],u=l[1],j=Object(a.useState)(),p=Object(b.a)(j,2),h=p[0],O=p[1],f=Object(a.useState)(),x=Object(b.a)(f,2),m=x[0],v=x[1],g=Object(a.useState)(),_=Object(b.a)(g,2),y=_[0],E=_[1],R=Object(a.useState)(!0),S=Object(b.a)(R,2),w=S[0],C=S[1];Object(a.useEffect)((function(){e.dispatch(Fe()),e.dispatch(ue())}),[]),Object(a.useEffect)((function(){if(e.vehicles&&(s(e.vehicles),"new"!==e.match.params.vehicleId&&O(e.match.params.vehicleId)),e.routes){var t,n=e.routes.sort((function(e,t){return e.number<t.number?-1:Number(e.number>t.number)})),c=[];if(n.forEach((function(e){t!==e.number&&(c.push(e),t=e.number)})),u(c),C(e.loading),"new"!==e.match.params.name){var a=e.routes.filter((function(t){return t.name===e.match.params.name}));v(a._id)}}}),[e.vehicles,e.routes]);return Object(c.jsxs)("div",{className:"container",style:{flexGrow:"1",width:"100%",boxSizing:"border-box"},children:[Object(c.jsx)("h3",{children:"My Account"}),Object(c.jsx)(ye,{}),Object(c.jsx)("hr",{}),w?Object(c.jsx)("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)"},children:Object(c.jsx)(oe.a,{})}):Object(c.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),!h)return d.b.warning("Choose vehicle is required.");if(!m)return d.b.warning("Choose route is required.");var n=e.routes.filter((function(e){return e._id===m}))[0],c=e.routes.filter((function(e){return e.number===n.number})).filter((function(e){return e._id!==m}))[0],a={type_of_service:y,has_route:n.name,has_reverse_route:c&&c.name?c.name:"none",number:n.number};e.dispatch(Me(h,a)),e.history.goBack()},children:[Object(c.jsx)("label",{children:Object(c.jsxs)("select",{className:"choose_vehicle",value:h||"none",onChange:function(e){return O(e.target.value)},disabled:"new"!==e.match.params.vehicleId,children:[Object(c.jsx)("option",{disabled:!0,value:"none",children:"Choose the vehicle..."}),r.map((function(e){return Object(c.jsxs)("option",{value:e._id,children:[e.type_of_vehicle," ",e.model," - ",e.plate]},e._id)}))]})}),Object(c.jsx)("span",{style:{display:"block",fontSize:"18px",marginTop:"10px"},children:"Choose type of service:"}),Object(c.jsxs)("label",{className:"alert__add--label",style:{display:"block",marginTop:"10px"},children:[Object(c.jsx)("input",{type:"radio",name:"type_of_service",value:"route",onChange:function(e){return E(e.target.value)}}),Object(c.jsx)("span",{children:"Bus route"})]}),"route"===y&&Object(c.jsx)("label",{children:Object(c.jsxs)("select",{className:"choose_route",value:m||"none",onChange:function(e){return v(e.target.value)},children:[Object(c.jsx)("option",{disabled:!0,value:"none",children:"Choose the route..."}),o.map((function(e){return Object(c.jsxs)("option",{value:e._id,children:[e.number," ",e.name]},e._id)}))]})}),Object(c.jsxs)("label",{className:"alert__add--label",style:{display:"block",marginTop:"10px"},children:[Object(c.jsx)("input",{type:"radio",name:"type_of_service",value:"hire_car",disabled:!0,onChange:function(e){return E(e.target.value)}}),Object(c.jsx)("span",{children:"Hire car"})]}),Object(c.jsxs)("label",{className:"alert__add--label",style:{display:"block",marginTop:"10px"},children:[Object(c.jsx)("input",{type:"radio",name:"type_of_service",value:"private",disabled:!0,onChange:function(e){return E(e.target.value)}}),Object(c.jsx)("span",{children:"Private"})]}),Object(c.jsx)("button",{type:"submit",style:{marginBottom:"15px",display:"block"},className:"route-add-edit__submit",children:"Submit"})]})]})}))),dc=function(){return Object(c.jsx)("div",{className:"container",style:{flexGrow:"1",width:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(c.jsx)("span",{style:{fontSize:"2rem"},children:"This Page doesn't exist yet"})})},jc=function(e){var t=e.city,n=e.editCity,r=e.deleteCity;return Object(c.jsxs)(a.Fragment,{children:[Object(c.jsx)("td",{colSpan:4,children:Object(c.jsx)("span",{children:t.city})}),Object(c.jsx)("td",{children:Object(c.jsxs)("div",{className:"users__form--btns",children:[Object(c.jsx)("button",{type:"button",onClick:function(){return n(t)},children:"Edit"}),Object(c.jsx)("button",{type:"button",onClick:function(){return r(t._id)},children:"Delete"})]})})]})},bc=function(e){var t=e.cityForEdit,n=e.updateCity,r=e.addCity,s=e.toggleModal,i=Object(a.useState)(),l=Object(b.a)(i,2),o=l[0],u=l[1];Object(a.useEffect)((function(){u(t)}),[]);return Object(c.jsx)("div",{className:"alert__modal--container",children:Object(c.jsxs)("div",{className:"alert__modal",children:[Object(c.jsxs)("form",{children:[Object(c.jsx)("input",{name:"city",value:o,placeholder:"City",onChange:function(e){u(e.target.value)},autoFocus:!0,style:{padding:"5px",marginTop:"15px",borderRadius:"8px",border:"1px solid gray",width:"90%"}}),Object(c.jsx)("div",{style:{display:"block"},children:t?Object(c.jsx)("button",{type:"submit",onClick:function(){return n(o)},className:"route-add-edit__submit",style:{display:"inline-block",padding:"10px 15px",margin:"10px 0 0"},children:"Update"}):Object(c.jsx)("button",{type:"submit",onClick:function(){return r(o)},className:"route-add-edit__submit",style:{display:"inline-block",padding:"10px 15px",margin:"10px 0 0"},children:"Save"})})]}),Object(c.jsx)("button",{className:"close__button--cross",onClick:s,children:"X"})]})})},pc=Object(l.b)((function(e){return{cities:e.cities.cities,loading:e.cities.loading}}))((function(e){var t=Object(a.useState)([]),n=Object(b.a)(t,2),r=n[0],s=n[1],i=Object(a.useState)(!0),l=Object(b.a)(i,2),o=(l[0],l[1]),u=Object(a.useState)(null),j=Object(b.a)(u,2),p=j[0],h=j[1],O=Object(a.useState)(!1),f=Object(b.a)(O,2),x=f[0],m=f[1];Object(a.useEffect)((function(){e.dispatch(ie())}),[]),Object(a.useEffect)((function(){e.cities&&(s(e.cities),o(e.loading))}),[e.cities]);var v=function(){return m(!x)},y=function(t){e.dispatch(function(e){return function(){var t=Object(_.a)(g.a.mark((function t(n){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.delete("".concat(R,"/city/").concat(e));case 3:c=t.sent,n({type:"DELETE_CITY",payload:c.data}),d.b.success("City was deleted."),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),n({type:"DELETE_CITY_ERROR"}),d.b.error("Something went wrong to delete City in DB");case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))},S=function(e){m(!0),h(e)};return Object(c.jsx)("div",{style:{flexGrow:"1",boxSizing:"border-box",width:"100%"},children:Object(c.jsxs)("div",{className:"container",children:[x&&Object(c.jsx)(bc,{updateCity:function(t){e.dispatch(function(e,t){return function(){var n=Object(_.a)(g.a.mark((function n(c){var a;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,E.a.put("".concat(R,"/city/").concat(e),t);case 3:a=n.sent,c({type:"UPDATE_CITY",payload:a.data}),d.b.success("City was updated."),n.next=13;break;case 8:n.prev=8,n.t0=n.catch(0),console.log(n.t0),c({type:"UPDATE_CITY_ERROR"}),d.b.error("Something went wrong to update City in DB");case 13:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()}(p._id,{city:t})),h(null),v()},addCity:function(t){e.dispatch(function(e){return function(){var t=Object(_.a)(g.a.mark((function t(n){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,E.a.post("".concat(R,"/city"),e);case 3:c=t.sent,n({type:"ADD_CITY",payload:c.data}),d.b.success("City was added."),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0),n({type:"ADD_CITY_ERROR"}),d.b.error("Something went wrong to add City to DB");case 13:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}({city:t})),v()},cityForEdit:p&&p.city,toggleModal:v}),Object(c.jsx)("h3",{children:"ADMIN"}),Object(c.jsx)(St,{}),Object(c.jsx)("button",{className:"add_route--link",onClick:function(){m(!0),h(null)},style:{backgroundColor:"white",cursor:"pointer",marginBottom:"10px",fontSize:"16px",fontFamily:"'Abril Fatface', cursive"},children:"Add City"}),Object(c.jsx)("hr",{}),Object(c.jsxs)("table",{className:"admin__table",style:{marginTop:"15px"},children:[Object(c.jsx)("thead",{children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{colSpan:"4",style:{width:"70%"},children:"City"}),Object(c.jsx)("th",{style:{width:"30%"},children:"Status"})]})}),Object(c.jsx)("tbody",{children:r.length>0&&r.map((function(e,t){return Object(c.jsx)("tr",{children:Object(c.jsx)(jc,{city:e,editCity:S,deleteCity:y,index:t})},t)}))})]})]})})}));var hc=Object(l.b)()((function(e){Object(a.useEffect)((function(){t()})),Object(a.useEffect)((function(){localStorage.user&&!1===JSON.parse(localStorage.user).isActive&&e.dispatch(function(){var e=Object(_.a)(g.a.mark((function e(t){var n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,E.a.put("".concat(R,"/user/active/").concat(O()._id));case 3:n=e.sent,t({type:"ACTIVE_USER",payload:n.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t({type:"ACTIVE_USER_ERROR"});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}())}),[]);var t=function(){window.addEventListener("unload",(function(e){return e.preventDefault(),function(){var e=JSON.parse(localStorage.user);e.isActive=!1,localStorage.user=JSON.stringify(e),navigator.sendBeacon("".concat(R,"/vehicles/dis_active"),JSON.stringify({id:O()._id}),{keepalive:!0})}()}))};return Object(c.jsx)(o.a,{children:Object(c.jsxs)("div",{style:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[Object(c.jsx)(je,{}),Object(c.jsx)(d.a,{}),Object(c.jsxs)(u.d,{children:[Object(c.jsx)(u.b,{exact:!0,path:"/",component:re}),Object(c.jsx)(u.b,{exact:!0,path:"/register_user",component:fe}),Object(c.jsx)(u.b,{exact:!0,path:"/register_driver",component:xe}),Object(c.jsx)(u.b,{exact:!0,path:"/track_bus",component:hn}),Object(c.jsx)(u.b,{exact:!0,path:"/route_detail/:routeId",component:lc}),Object(c.jsx)(u.b,{exact:!0,path:"/route_explained/:id",component:oc}),Object(c.jsx)(ve,{exact:!0,path:"/profile",component:Ne}),Object(c.jsx)(Ae,{exact:!0,path:"/vehicles",component:He}),Object(c.jsx)(Ae,{exact:!0,path:"/add_vehicle",component:Rt}),Object(c.jsx)(Ae,{exact:!0,path:"/service/:vehicleId/:name",component:uc}),Object(c.jsx)(Ie,{exact:!0,path:"/admin/cities",component:pc}),Object(c.jsx)(Ie,{exact:!0,path:"/admin/users",component:Ut}),Object(c.jsx)(Ie,{exact:!0,path:"/admin/vehicles",component:Mt}),Object(c.jsx)(Ie,{exact:!0,path:"/admin/routes",component:Pt}),Object(c.jsx)(Ie,{exact:!0,path:"/admin/route_add_edit/:id",component:zt}),Object(c.jsx)(Ie,{exact:!0,path:"/admin/route_detail_edit/:id",component:un}),Object(c.jsx)(Ie,{exact:!0,path:"/admin/advertisement",component:jn}),Object(c.jsx)(Ie,{exact:!0,path:"/admin/faq",component:bn}),Object(c.jsx)(Ie,{exact:!0,path:"/admin/faq_edit/:id",component:pn}),Object(c.jsx)(u.b,{component:dc})]}),Object(c.jsx)(se,{})]})})})),Oc=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,238)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))},fc=n(39),xc=n(97),mc=n.n(xc),vc=n(98),gc={user:{name:"",email:"",role:"",latitude:"",longitude:"",isActive:"",mobileNumber:"",images:[],date:""},isAuthenticated:null,loading:!0},_c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gc,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case"LOGIN_REGISTER_FACEBOOK":case"LOGIN_REGISTER_GOOGLE":case"LOAD_USER":return Object(j.a)(Object(j.a)({},e),{},{user:c.user,isAuthenticated:!0,error:"",loading:!1});case"GOOGLE_AUTH_ERROR":case"FACEBOOK_AUTH_ERROR":return localStorage.removeItem("token"),Object(j.a)(Object(j.a)({},e),{},{isAuthenticated:!1,loading:!1});case"LOAD_USER_ERROR":return Object(j.a)(Object(j.a)({},e),{},{isAuthenticated:!1,loading:!1});default:return Object(j.a)(Object(j.a)({},e),{},{loading:!1})}},yc={user:{name:"",email:"",role:"",latitude:"",longitude:"",isActive:!1,mobileNumber:"",images:[],date:""},isAuthenticated:null,loading:!0,error:"",success:""},Ec=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yc,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case"LOAD_USER":case"UPDATE_PROFILE":case"SET_USER_LOCATION":return Object(j.a)(Object(j.a)({},e),{},{user:c.user,isAuthenticated:!0,loading:!1,error:""});case"ACTIVE_USER":var a=JSON.parse(localStorage.user);return a.isActive=!0,localStorage.user=JSON.stringify(a),Object(j.a)(Object(j.a)({},e),{},{user:c.user,loading:!1});case"SET_USER_LOCATION_ERROR":return Object(j.a)(Object(j.a)({},e),{},{error:c.error,loading:!1});case"LOAD_USER_ERROR":case"LOGOUT_USER":return Object(j.a)(Object(j.a)({},e),{},{user:{name:"",email:"",role:"",latitude:"",longitude:"",isActive:!1,mobileNumber:"",images:[],date:""},isAuthenticated:!1,loading:!1});default:return Object(j.a)(Object(j.a)({},e),{},{loading:!1})}},Rc={vehicles:[],vehiclesByRoute:[],error:"",loading:!0},Sc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rc,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case"ADD_VEHICLE_SUCCESS":return Object(j.a)(Object(j.a)({},e),{},{error:"",vehicles:[].concat(Object(ge.a)(e.vehicles),[c.vehicle]),loading:!1});case"GET_VEHICLES_FOR_DRIVER":case"ACTIVE_VEHICLE":return Object(j.a)(Object(j.a)({},e),{},{vehicles:c.vehicles,error:"",loading:!1});case"GET_VEHICLES_BY_NUMBER":return Object(j.a)(Object(j.a)({},e),{},{vehiclesByRoute:c.vehicles,loading:!1});case"CLEAR_VEHICLES_BY_NUMBER":return Object(j.a)(Object(j.a)({},e),{},{vehiclesByRoute:[]});case"SET_VEHICLE_POSITION":case"CLEAR_VEHICLE_POSITION":case"VEHICLE_SERVICE":var a=e.vehicles.map((function(e){return e._id===c.vehicle._id?c.vehicle:e}));return Object(j.a)(Object(j.a)({},e),{},{error:"",vehicles:a,loading:!1});case"ADD_VEHICLE_ERROR":case"GET_VEHICLES_FOR_DRIVER_ERROR":case"SET_VEHICLE_POSITION_ERROR":return Object(j.a)(Object(j.a)({},e),{},{error:"Something went wrong",loading:!1});default:return Object(j.a)(Object(j.a)({},e),{},{loading:!1})}},wc={users:[],vehicles:[],routes:[],currentRoute:{},loading:!0,error:""},Cc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wc,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case"ADMIN_GET_USERS":return Object(j.a)(Object(j.a)({},e),{},{users:c,error:"",loading:!1});case"UPDATE_USER_BY_ADMIN":case"ACTIVATING_USER":var a=e.users.map((function(e){return e._id===c.user._id?c.user:e}));return Object(j.a)(Object(j.a)({},e),{},{error:"",loading:!1,users:a});case"DELETE_USER_BY_ADMIN":return Object(j.a)(Object(j.a)({},e),{},{error:"",loading:!1,users:e.users.filter((function(e){return e._id!==c.user._id}))});case"ADMIN_GET_VEHICLES":return Object(j.a)(Object(j.a)({},e),{},{vehicles:c,error:"",loading:!1});case"UPDATE_VEHICLE_BY_ADMIN":case"ACTIVATING_VEHICLE":var r=e.vehicles.map((function(e){return e._id===c.vehicle._id?c.vehicle:e}));return Object(j.a)(Object(j.a)({},e),{},{error:"",vehicles:r,loading:!1});case"DELETE_VEHICLE_BY_ADMIN":var s=e.vehicles.filter((function(e){return e._id!==c.vehicle._id}));return Object(j.a)(Object(j.a)({},e),{},{error:"",loading:!1,vehicles:s});case"GET_ROUTES":return Object(j.a)(Object(j.a)({},e),{},{routes:c.routes,currentRoute:{},error:"",loading:!1});case"ADD_ROUTE":return Object(j.a)(Object(j.a)({},e),{},{error:"",loading:!1,routes:[].concat(Object(ge.a)(e.routes),[c.route]),currentRoute:{}});case"UPDATE_ROUTE":case"ACTIVATING_ROUTE":var i=e.routes.map((function(e){return e._id===c.route._id?c.route:e}));return Object(j.a)(Object(j.a)({},e),{},{error:"",loading:!1,routes:i,currentRoute:{}});case"DELETE_ROUTE":return Object(j.a)(Object(j.a)({},e),{},{currentRoute:{},loading:!1,routes:e.routes.filter((function(e){return e._id!==c.route._id}))});case"GET_CURRENT_ROUTE":return Object(j.a)(Object(j.a)({},e),{},{currentRoute:c.route,loading:!1});case"ADMIN_GET_USERS_ERROR":return Object(j.a)(Object(j.a)({},e),{},{users:[],loading:!1});case"ADMIN_GET_VEHICLES_ERROR":return Object(j.a)(Object(j.a)({},e),{},{vehicles:[],loading:!1});case"GET_ROUTES_ERROR":return Object(j.a)(Object(j.a)({},e),{},{routes:[],loading:!1});case"UPDATE_VEHICLE_BY_ADMIN_ERROR":case"UPDATE_USER_BY_ADMIN_ERROR":case"ADD_ROUTE_ERROR":case"DELETE_ROUTE_ERROR":case"GET_CURRENT_ROUTE_ERROR":case"UPDATE_ROUTE_ERROR":case"ACTIVATING_USER_ERROR":case"DELETE_VEHICLE_BY_ADMIN_ERROR":case"ACTIVATING_VEHICLE_ERROR":case"ACTIVATING_ROUTE_ERROR":return Object(j.a)(Object(j.a)({},e),{},{error:c.error,loading:!1});default:return Object(j.a)({},e)}},kc={advertisements:[],error:"",loading:!0},Tc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kc,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case"GET_ADVERTS":return Object(j.a)(Object(j.a)({},e),{},{advertisements:c,loading:!1});case"UPDATE_ADVERTS":case"ADD_ADVERTS":return Object(j.a)(Object(j.a)({},e),{},{advertisements:[c.adverts],loading:!1});case"GET_ADVERTS_ERROR":case"ADD_ADVERTS_ERROR":case"UPDATE_ADVERTS_ERROR":default:return Object(j.a)(Object(j.a)({},e),{},{loading:!1})}},Nc={faqs:[],currentFaq:{},loading:!0},Ac=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nc,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case"GET_FAQS":return Object(j.a)(Object(j.a)({},e),{},{faqs:c,currentFaq:{},loading:!1});case"GET_CURRENT_FAQ":return Object(j.a)(Object(j.a)({},e),{},{currentFaq:c.faq,loading:!1});case"ADD_FAQ":return Object(j.a)(Object(j.a)({},e),{},{faqs:[].concat(Object(ge.a)(e.faqs),[c.faq]),currentFaq:{},loading:!1});case"UPDATE_FAQ":var a=e.faqs.map((function(e){return e._id===c.faq._id?c.faq:e}));return Object(j.a)(Object(j.a)({},e),{},{faqs:a,currentFaq:{},loading:!1});case"DELETE_FAQ":return Object(j.a)(Object(j.a)({},e),{},{faqs:e.faqs.filter((function(e){return e._id!==c.faq._id})),currentFaq:{},loading:!1});case"GET_CURRENT_FAQ_ERROR":return Object(j.a)(Object(j.a)({},e),{},{currentFaq:{},loading:!1});case"GET_FAQS_ERROR":case"ADD_FAQ_ERROR":case"UPDATE_FAQ_ERROR":case"DELETE_FAQ_ERROR":default:return Object(j.a)(Object(j.a)({},e),{},{loading:!1})}},Ic={routes:[],currentRoute:{},loading:!0},Dc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ic,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case"GET_TRACKER_ROUTES":return Object(j.a)(Object(j.a)({},e),{},{routes:c.routes,loading:!1});case"GET_ROUTES_BY_NUMBER":return Object(j.a)(Object(j.a)({},e),{},{currentRoute:c.route,loading:!1});case"ADD_ALERT":case"SET_STATE_ALERT":case"DELETE_ALERT":return Object(j.a)(Object(j.a)({},e),{},{currentRoute:c.route,loading:!1});case"CLEAR_CURRENT_ROUTE":return Object(j.a)(Object(j.a)({},e),{},{currentRoute:{},loading:!0});default:return Object(j.a)({},e)}},Fc={cities:[],loading:!0,error:""},Uc=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fc,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case"GET_CITIES":return{cities:c.cities,loading:!1};case"ADD_CITY":return{cities:[].concat(Object(ge.a)(e.cities),[c.city]),loading:!1};case"UPDATE_CITY":var a=e.cities.map((function(e){return e._id===c.city._id?c.city:e}));return{cities:a,loading:!1};case"DELETE_CITY":return{cities:e.cities.filter((function(e){return e._id!==c.city._id})),loading:!1};case"GET_CITIES_ERROR":case"ADD_CITY_ERROR":case"UPDATE_CITY_ERROR":case"DELETE_CITY_ERROR":default:return e}},Lc=Object(fc.c)({auth:_c,user:Ec,vehicles:Sc,admin:Cc,advertisments:Tc,faqs:Ac,routes:Dc,cities:Uc}),Bc=Object(fc.a)(mc.a,vc.a)(fc.d);i.a.render(Object(c.jsx)(r.a.StrictMode,{children:Object(c.jsx)(l.a,{store:Bc(Lc,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()),children:Object(c.jsx)(hc,{})})}),document.getElementById("root")),Oc()}},[[218,1,2]]]);
//# sourceMappingURL=main.f06f542a.chunk.js.map